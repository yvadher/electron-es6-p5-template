{"dependencies":[{"name":"../p5","loc":{"line":71,"column":20}}],"generated":{"js":"!function(t,e){\"function\"==typeof define&&define.amd?define(\"p5.sound\",[\"p5\"],function(t){e(t)}):\"object\"==typeof exports?e(require(\"../p5\")):e(t.p5)}(this,function(p5){var sndcore,master,a143,helpers,a153,errorHandler,panner,a197,soundfile,amplitude,a541,fft,Tone_core_Tone,Tone_signal_SignalBase,Tone_signal_WaveShaper,Tone_core_Type,Tone_core_Param,Tone_core_Gain,Tone_signal_Signal,Tone_signal_Add,Tone_signal_Multiply,Tone_signal_Scale,signal,a1068,a1069,a1070,a1071,a1073,oscillator,Tone_core_Timeline,Tone_signal_TimelineSignal,env,a1314,a1315,a1316,a1317,a1318,pulse,noise,audioin,a1496,Tone_signal_Negate,Tone_signal_Subtract,Tone_signal_GreaterThanZero,Tone_signal_EqualZero,Tone_signal_Equal,Tone_signal_Select,Tone_signal_IfThenElse,Tone_signal_OR,Tone_signal_AND,Tone_signal_NOT,Tone_signal_GreaterThan,Tone_signal_LessThan,Tone_signal_Abs,Tone_signal_Max,Tone_signal_Min,Tone_signal_Modulo,Tone_signal_Pow,Tone_signal_AudioToGain,Tone_signal_Expr,Tone_signal_EqualPowerGain,Tone_component_CrossFade,effect,a1819,a1820,filter,a1840,delay,a1868,a1869,reverb,a1890,a1891,Tone_core_TimelineState,Tone_core_Clock,metro,a1999,a2000,looper,compressor,soundRecorder,peakdetect,gain,a2231,distortion,src_app;sndcore=function(){!function(){function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty(\"webkitAudioContext\")&&!window.hasOwnProperty(\"AudioContext\")&&(window.AudioContext=window.webkitAudioContext,\"function\"!=typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),\"function\"!=typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),\"function\"!=typeof AudioContext.prototype.createScriptProcessor&&(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),\"function\"!=typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var i=e?this.internal_createDelay(e):this.internal_createDelay();return t(i.delayTime),i},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start?(e.internal_start=e.start,e.start=function(t,i,o){void 0!==o?e.internal_start(t||0,i,o):e.internal_start(t||0,i||0)}):e.start=function(t,e,i){e||i?this.noteGrainOn(t||0,e,i):this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},\"function\"!=typeof AudioContext.prototype.createOscillator&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start?(e.internal_start=e.start,e.start=function(t){e.internal_start(t||0)}):e.start=function(t){this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e})),window.hasOwnProperty(\"webkitOfflineAudioContext\")&&!window.hasOwnProperty(\"OfflineAudioContext\")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext)}(window);var t=new window.AudioContext;p5.prototype.getAudioContext=function(){return t},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=document.createElement(\"audio\");p5.prototype.isSupported=function(){return!!e.canPlayType};if(p5.prototype.isFileSupported=function(t){switch(t.toLowerCase()){case\"mp3\":return!!e.canPlayType&&e.canPlayType(\"audio/mpeg;\");case\"wav\":return!!e.canPlayType&&e.canPlayType('audio/wav; codecs=\"1\"');case\"ogg\":return!!e.canPlayType&&e.canPlayType('audio/ogg; codecs=\"vorbis\"');case\"aac\":case\"m4a\":case\"mp4\":return!!e.canPlayType&&(e.canPlayType(\"audio/x-m4a;\")||e.canPlayType(\"audio/aac;\"));case\"aif\":case\"aiff\":return!!e.canPlayType&&e.canPlayType(\"audio/x-aiff;\");default:return!1}},!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){var i=!1,o=function(){if(!i){var e=t.createBuffer(1,1,22050),o=t.createBufferSource();o.buffer=e,o.connect(t.destination),o.start(0),\"running\"===t.state&&(i=!0)}};document.addEventListener(\"touchend\",o,!1),document.addEventListener(\"touchstart\",o,!1)}}(),a143=new function(){var t=p5.prototype.getAudioContext();this.input=t.createGain(),this.output=t.createGain(),this.limiter=t.createDynamicsCompressor(),this.limiter.threshold.value=0,this.limiter.ratio.value=20,this.audiocontext=t,this.output.disconnect(),this.inputSources=[],this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=t.createGain(),this.fftMeter=t.createGain(),this.output.connect(this.meter),this.output.connect(this.fftMeter),this.output.connect(this.audiocontext.destination),this.soundArray=[],this.parts=[],this.extensions=[]},p5.prototype.getMasterVolume=function(){return a143.output.gain.value},p5.prototype.masterVolume=function(t,e,i){if(\"number\"==typeof t){e=e||0,i=i||0;var o=a143.audiocontext.currentTime,n=a143.output.gain.value;a143.output.gain.cancelScheduledValues(o+i),a143.output.gain.linearRampToValueAtTime(n,o+i),a143.output.gain.linearRampToValueAtTime(t,o+i+e)}else{if(!t)return a143.output.gain;t.connect(a143.output.gain)}},p5.prototype.soundOut=p5.soundOut=a143,p5.soundOut._silentNode=a143.audiocontext.createGain(),p5.soundOut._silentNode.gain.value=0,p5.soundOut._silentNode.connect(a143.audiocontext.destination),master=a143,a153=master,p5.prototype.sampleRate=function(){return a153.audiocontext.sampleRate},p5.prototype.freqToMidi=function(t){var e=Math.log(t/440)/Math.log(2);return Math.round(12*e)+69},p5.prototype.midiToFreq=function(t){return 440*Math.pow(2,(t-69)/12)},p5.prototype.soundFormats=function(){a153.extensions=[];for(var t=0;t<arguments.length;t++){if(arguments[t]=arguments[t].toLowerCase(),!([\"mp3\",\"wav\",\"ogg\",\"m4a\",\"aac\"].indexOf(arguments[t])>-1))throw arguments[t]+\" is not a valid sound format!\";a153.extensions.push(arguments[t])}},p5.prototype.disposeSound=function(){for(var t=0;t<a153.soundArray.length;t++)a153.soundArray[t].dispose()},p5.prototype.registerMethod(\"remove\",p5.prototype.disposeSound),p5.prototype._checkFileFormats=function(t){var e;if(\"string\"==typeof t){var i=(e=t).split(\".\").pop();if([\"mp3\",\"wav\",\"ogg\",\"m4a\",\"aac\"].indexOf(i)>-1)if(p5.prototype.isFileSupported(i))e=e;else for(var o=e.split(\".\"),n=o[o.length-1],s=0;s<a153.extensions.length;s++){var r=a153.extensions[s];if(p5.prototype.isFileSupported(r)){for(n=\"\",2===o.length&&(n+=o[0]),s=1;s<=o.length-2;s++)n+=\".\"+o[s];e=n+=\".\",e=e+=r;break}}else for(s=0;s<a153.extensions.length;s++)if(r=a153.extensions[s],p5.prototype.isFileSupported(r)){e=e+\".\"+r;break}}else if(\"object\"==typeof t)for(s=0;s<t.length;s++)if(r=t[s].split(\".\").pop(),p5.prototype.isFileSupported(r)){e=t[s];break}return e},p5.prototype._mathChain=function(t,e,i,o,n){for(var s in t.mathOps)t.mathOps[s]instanceof n&&(t.mathOps[s].dispose(),(i=s)<t.mathOps.length-1&&(o=t.mathOps[s+1]));return t.mathOps[i-1].disconnect(),t.mathOps[i-1].connect(e),e.connect(o),t.mathOps[i]=e,t},helpers={midiToFreq:p5.prototype.midiToFreq},errorHandler=function(t,e,i){var o,n,s=new Error;return s.name=t,s.originalStack=s.stack+e,o=s.stack+e,s.failedPath=i,n=(n=o.split(\"\\n\")).filter(function(t){return!t.match(/(p5.|native code|globalInit)/g)}),s.stack=n.join(\"\\n\"),s},a197=master.audiocontext,void 0!==a197.createStereoPanner?(p5.Panner=function(t,e){this.stereoPanner=this.input=a197.createStereoPanner(),t.connect(this.stereoPanner),this.stereoPanner.connect(e)},p5.Panner.prototype.pan=function(t,e){var i=e||0,o=a197.currentTime+i;this.stereoPanner.pan.linearRampToValueAtTime(t,o)},p5.Panner.prototype.inputChannels=function(){},p5.Panner.prototype.connect=function(t){this.stereoPanner.connect(t)},p5.Panner.prototype.disconnect=function(){this.stereoPanner.disconnect()}):(p5.Panner=function(t,e,i){this.input=a197.createGain(),t.connect(this.input),this.left=a197.createGain(),this.right=a197.createGain(),this.left.channelInterpretation=\"discrete\",this.right.channelInterpretation=\"discrete\",i>1?(this.splitter=a197.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right)),this.output=a197.createChannelMerger(2),this.left.connect(this.output,0,1),this.right.connect(this.output,0,0),this.output.connect(e)},p5.Panner.prototype.pan=function(t,e){var i=e||0,o=a197.currentTime+i,n=(t+1)/2,s=Math.cos(n*Math.PI/2),r=Math.sin(n*Math.PI/2);this.left.gain.linearRampToValueAtTime(r,o),this.right.gain.linearRampToValueAtTime(s,o)},p5.Panner.prototype.inputChannels=function(t){1===t?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===t&&(this.splitter,this.splitter=a197.createChannelSplitter(2),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))},p5.Panner.prototype.connect=function(t){this.output.connect(t)},p5.Panner.prototype.disconnect=function(){this.output.disconnect()}),panner=void(p5.Panner3D=function(t,e){var i=a197.createPanner();return i.panningModel=\"HRTF\",i.distanceModel=\"linear\",i.setPosition(0,0,0),t.connect(i),i.connect(e),i.pan=function(t,e,o){i.setPosition(t,e,o)},i}),soundfile=function(){var t=errorHandler,e=master,i=e.audiocontext,o=helpers.midiToFreq;p5.SoundFile=function(t,i,o,n){if(void 0!==t){if(\"string\"==typeof t||\"string\"==typeof t[0]){var s=p5.prototype._checkFileFormats(t);this.url=s}else if(\"object\"==typeof t&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw\"Unable to load file because the File API is not supported\";t.file&&(t=t.file),this.file=t}this._onended=function(){},this._looping=!1,this._playing=!1,this._paused=!1,this._pauseTime=0,this._cues=[],this._lastPos=0,this._counterNode=null,this._scopeNode=null,this.bufferSourceNodes=[],this.bufferSourceNode=null,this.buffer=null,this.playbackRate=1,this.input=e.audiocontext.createGain(),this.output=e.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.pauseTime=0,this.mode=\"sustain\",this.startMillis=null,this.panPosition=0,this.panner=new p5.Panner(this.output,e.input,2),(this.url||this.file)&&this.load(i,o),e.soundArray.push(this),this._whileLoading=\"function\"==typeof n?n:function(){}},p5.prototype.registerPreloadMethod(\"loadSound\",p5.prototype),p5.prototype.loadSound=function(t,e,i,o){window.location.origin.indexOf(\"file://\")>-1&&\"undefined\"===window.cordova&&window.alert(\"This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS\");var n=this;return new p5.SoundFile(t,function(){\"function\"==typeof e&&e.apply(n,arguments),n._decrementPreload()},i,o)},p5.SoundFile.prototype.load=function(e,o){var n=this,s=(new Error).stack;if(void 0!==this.url&&\"\"!==this.url){var r=new XMLHttpRequest;r.addEventListener(\"progress\",function(t){n._updateProgress(t)},!1),r.open(\"GET\",this.url,!0),r.responseType=\"arraybuffer\",r.onload=function(){if(200===r.status)i.decodeAudioData(r.response,function(t){n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n)},function(){var e=new t(\"decodeAudioData\",s,n.url),i=\"AudioContext error at decodeAudioData for \"+n.url;o&&(e.msg=i,o(e))});else{var a=new t(\"loadSound\",s,n.url),p=\"Unable to load \"+n.url+\". The request status was: \"+r.status+\" (\"+r.statusText+\")\";o&&(a.message=p,o(a))}},r.onerror=function(){var e=new t(\"loadSound\",s,n.url),i=\"There was no response from the server at \"+n.url+\". Check the url and internet connectivity.\";o&&(e.message=i,o(e))},r.send()}else if(void 0!==this.file){var a=new FileReader;a.onload=function(){i.decodeAudioData(a.result,function(t){n.buffer=t,n.panner.inputChannels(t.numberOfChannels),e&&e(n)})},a.onerror=function(t){onerror&&onerror(t)},a.readAsArrayBuffer(this.file)}},p5.SoundFile.prototype._updateProgress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*.99;this._whileLoading(e,t)}else this._whileLoading(\"size unknown\")},p5.SoundFile.prototype.isLoaded=function(){return!!this.buffer},p5.SoundFile.prototype.play=function(t,i,o,n,s){var r,a,p=this,u=e.audiocontext.currentTime,c=t||0;if(c<0&&(c=0),c+=u,this.rate(i),this.setVolume(o),!this.buffer)throw\"not ready to play file, buffer has yet to load. Try preload()\";if(this._pauseTime=0,\"restart\"===this.mode&&this.buffer&&this.bufferSourceNode&&(this.bufferSourceNode.stop(c),this._counterNode.stop(c)),this.bufferSourceNode=this._initSourceNode(),this._counterNode&&(this._counterNode=void 0),this._counterNode=this._initCounterNode(),n){if(!(n>=0&&n<this.buffer.duration))throw\"start time out of range\";r=n}else r=0;s=s?s<=this.buffer.duration-r?s:this.buffer.duration:this.buffer.duration-r,this.bufferSourceNode.connect(this.output),this._paused?(this.bufferSourceNode.start(c,this.pauseTime,s),this._counterNode.start(c,this.pauseTime,s)):(this.bufferSourceNode.start(c,r,s),this._counterNode.start(c,r,s)),this._playing=!0,this._paused=!1,this.bufferSourceNodes.push(this.bufferSourceNode),this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1;var h=function(){this._playing=!1,this.removeEventListener(\"ended\",h,!1),p._onended(p),p.bufferSourceNodes.forEach(function(t,e){!1===t._playing&&p.bufferSourceNodes.splice(e)}),0===p.bufferSourceNodes.length&&(p._playing=!1)};this.bufferSourceNode.onended=h,this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping,!0===this._looping&&(a=r+s,this.bufferSourceNode.loopStart=r,this.bufferSourceNode.loopEnd=a,this._counterNode.loopStart=r,this._counterNode.loopEnd=a)},p5.SoundFile.prototype.playMode=function(t){var i=t.toLowerCase();if(\"restart\"===i&&this.buffer&&this.bufferSourceNode)for(var o=0;o<this.bufferSourceNodes.length-1;o++){var n=e.audiocontext.currentTime;this.bufferSourceNodes[o].stop(n)}if(\"restart\"!==i&&\"sustain\"!==i)throw'Invalid play mode. Must be either \"restart\" or \"sustain\"';this.mode=i},p5.SoundFile.prototype.pause=function(t){var i=e.audiocontext.currentTime,o=(t||0)+i;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(o),this._counterNode.stop(o),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0},p5.SoundFile.prototype.loop=function(t,e,i,o,n){this._looping=!0,this.play(t,e,i,o,n)},p5.SoundFile.prototype.setLoop=function(t){if(!0===t)this._looping=!0;else{if(!1!==t)throw\"Error: setLoop accepts either true or false\";this._looping=!1}this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)},p5.SoundFile.prototype.isLooping=function(){return!!this.bufferSourceNode&&(!0===this._looping&&!0===this.isPlaying())},p5.SoundFile.prototype.isPlaying=function(){return this._playing},p5.SoundFile.prototype.isPaused=function(){return this._paused},p5.SoundFile.prototype.stop=function(t){var i=t||0;if(\"sustain\"===this.mode)this.stopAll(i),this._playing=!1,this.pauseTime=0,this._paused=!1;else if(this.buffer&&this.bufferSourceNode){var o=e.audiocontext.currentTime,n=i||0;this.pauseTime=0,this.bufferSourceNode.stop(o+n),this._counterNode.stop(o+n),this._playing=!1,this._paused=!1}},p5.SoundFile.prototype.stopAll=function(t){var i=e.audiocontext.currentTime,o=t||0;if(this.buffer&&this.bufferSourceNode){for(var n=0;n<this.bufferSourceNodes.length;n++)if(void 0!==typeof this.bufferSourceNodes[n])try{this.bufferSourceNodes[n].onended=function(){},this.bufferSourceNodes[n].stop(i+o)}catch(t){}this._counterNode.stop(i+o),this._onended(this)}},p5.SoundFile.prototype.setVolume=function(t,i,o){if(\"number\"==typeof t){var n=i||0,s=o||0,r=e.audiocontext.currentTime,a=this.output.gain.value;this.output.gain.cancelScheduledValues(r+s),this.output.gain.linearRampToValueAtTime(a,r+s),this.output.gain.linearRampToValueAtTime(t,r+s+n)}else{if(!t)return this.output.gain;t.connect(this.output.gain)}},p5.SoundFile.prototype.amp=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.fade=p5.SoundFile.prototype.setVolume,p5.SoundFile.prototype.getVolume=function(){return this.output.gain.value},p5.SoundFile.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},p5.SoundFile.prototype.getPan=function(){return this.panPosition},p5.SoundFile.prototype.rate=function(t){if(void 0===t)return this.playbackRate;if(0===t)t=1e-13;else if(t<0&&!this.reversed){var i=(this.currentTime()-this.duration())/t;this.pauseTime=i,this.reverseBuffer(),t=Math.abs(t)}else t>0&&this.reversed&&this.reverseBuffer();if(this.bufferSourceNode){var o=e.audiocontext.currentTime;this.bufferSourceNode.playbackRate.cancelScheduledValues(o),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(t),o),this._counterNode.playbackRate.cancelScheduledValues(o),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(t),o)}return this.playbackRate=t,this.playbackRate},p5.SoundFile.prototype.setPitch=function(t){var e=o(t)/o(60);this.rate(e)},p5.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate},p5.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0},p5.SoundFile.prototype.currentTime=function(){return this._pauseTime>0?this._pauseTime:this._lastPos/i.sampleRate},p5.SoundFile.prototype.jump=function(t,e){if(t<0||t>this.buffer.duration)throw\"jump time out of range\";if(e>this.buffer.duration-t)throw\"end time out of range\";var i=t||0,o=e||this.buffer.duration-t;this.isPlaying()&&this.stop(),this.play(0,this.playbackRate,this.output.gain.value,i,o)},p5.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels},p5.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate},p5.SoundFile.prototype.frames=function(){return this.buffer.length},p5.SoundFile.prototype.getPeaks=function(t){if(!this.buffer)throw\"Cannot load peaks yet, buffer is not loaded\";if(t||(t=5*window.width),this.buffer){for(var e=this.buffer,i=e.length/t,o=~~(i/10)||1,n=e.numberOfChannels,s=new Float32Array(Math.round(t)),r=0;r<n;r++)for(var a=e.getChannelData(r),p=0;p<t;p++){for(var u=~~(p*i),c=~~(u+i),h=0,l=u;l<c;l+=o){var d=a[l];d>h?h=d:-d>h&&(h=d)}(0===r||Math.abs(h)>s[p])&&(s[p]=h)}return s}},p5.SoundFile.prototype.reverseBuffer=function(){var t=this.getVolume();if(this.setVolume(0,.01,0),!this.buffer)throw\"SoundFile is not done loading\";for(var e=0;e<this.buffer.numberOfChannels;e++)Array.prototype.reverse.call(this.buffer.getChannelData(e));this.reversed=!this.reversed,this.setVolume(t,.01,.0101)},p5.SoundFile.prototype.onended=function(t){return this._onended=t,this},p5.SoundFile.prototype.add=function(){},p5.SoundFile.prototype.dispose=function(){var t=e.audiocontext.currentTime,i=e.soundArray.indexOf(this);if(e.soundArray.splice(i,1),this.stop(t),this.buffer&&this.bufferSourceNode){for(var o=0;o<this.bufferSourceNodes.length-1;o++)if(null!==this.bufferSourceNodes[o]){this.bufferSourceNodes[o].disconnect();try{this.bufferSourceNodes[o].stop(t)}catch(t){}this.bufferSourceNodes[o]=null}if(this.isPlaying()){try{this._counterNode.stop(t)}catch(t){}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null),this.panner&&(this.panner.disconnect(),this.panner=null)},p5.SoundFile.prototype.connect=function(t){t?t.hasOwnProperty(\"input\")?this.panner.connect(t.input):this.panner.connect(t):this.panner.connect(e.input)},p5.SoundFile.prototype.disconnect=function(){this.panner.disconnect()},p5.SoundFile.prototype.getLevel=function(){},p5.SoundFile.prototype.setPath=function(t,e){var i=p5.prototype._checkFileFormats(t);this.url=i,this.load(e)},p5.SoundFile.prototype.setBuffer=function(t){var e=t.length,o=t[0].length,n=i.createBuffer(e,o,i.sampleRate);t[0]instanceof Float32Array||(t[0]=new Float32Array(t[0]));for(var s=0;s<e;s++){n.getChannelData(s).set(t[s])}this.buffer=n,this.panner.inputChannels(e)};p5.SoundFile.prototype._initCounterNode=function(){var t=this,e=i.currentTime,o=i.createBufferSource();return t._scopeNode&&(t._scopeNode.disconnect(),t._scopeNode.onaudioprocess=void 0,t._scopeNode=null),t._scopeNode=i.createScriptProcessor(256,1,1),o.buffer=function(t){for(var e=new Float32Array(t.length),o=i.createBuffer(1,t.length,44100),n=0;n<t.length;n++)e[n]=n;return o.getChannelData(0).set(e),o}(t.buffer),o.playbackRate.setValueAtTime(t.playbackRate,e),o.connect(t._scopeNode),t._scopeNode.connect(p5.soundOut._silentNode),t._scopeNode.onaudioprocess=function(e){var i=e.inputBuffer.getChannelData(0);t._lastPos=i[i.length-1]||0,t._onTimeUpdate(t._lastPos)},o},p5.SoundFile.prototype._initSourceNode=function(){var t=i.createBufferSource();return t.buffer=this.buffer,t.playbackRate.value=this.playbackRate,t},p5.SoundFile.prototype.processPeaks=function(t,e,i,o){var n=this.buffer.length,a=this.buffer.sampleRate,p=this.buffer,u=[],c=e||.9,h=i||.22,l=o||200,d=new window.OfflineAudioContext(1,n,a),f=d.createBufferSource();f.buffer=p;var m=d.createBiquadFilter();m.type=\"lowpass\",f.connect(m),m.connect(d.destination),f.start(0),d.startRendering(),d.oncomplete=function(e){var i=e.renderedBuffer,o=i.getChannelData(0);do{u=s(o,c),c-=.005}while(Object.keys(u).length<l&&c>=h);var n,a,p,d=function(t){for(var e=[],i=Object.keys(t).sort(),o=0;o<i.length;o++)for(var n=0;n<10;n++){var s=t[i[o]],r=t[i[o+n]];if(s&&r){var a=s.sampleIndex,p=r.sampleIndex,u=p-a;u>0&&s.intervals.push(u);var c=e.some(function(t){if(t.interval===u)return t.count++,t});c||e.push({interval:u,count:1})}}return e}(u),f=(n=d,a=i.sampleRate,p=[],n.forEach(function(t){try{var e=Math.abs(60/(t.interval/a));if(e=r(e),!p.some(function(i){if(i.tempo===e)return i.count+=t.count})){if(isNaN(e))return;p.push({tempo:Math.round(e),count:t.count})}}catch(t){throw t}}),p).sort(function(t,e){return e.count-t.count}).splice(0,5);this.tempo=f[0].tempo;var m=function(t,e,i,o){for(var n=[],s=Object.keys(t).sort(),a=0;a<s.length;a++)for(var p=s[a],u=t[p],c=0;c<u.intervals.length;c++){var h=Math.round(Math.abs(60/(u.intervals[c]/i)));h=r(h),Math.abs(h-e)<o&&n.push(u.sampleIndex/44100)}return n=n.filter(function(t,e,i){if(i[e+1]-t>.01)return!0})}(u,f[0].tempo,i.sampleRate,5);t(m)}};var n=function(t,e){this.sampleIndex=e,this.amplitude=t,this.tempos=[],this.intervals=[]};function s(t,e){for(var i={},o=t.length,s=0;s<o;s++){if(t[s]>e){var r=t[s],a=new n(r,s);i[s]=a,s+=6e3}s++}return i}function r(t){if(isFinite(t)&&0!==t){for(;t<90;)t*=2;for(;t>180&&t>90;)t/=2;return t}}p5.SoundFile.prototype.addCue=function(t,e,i){var o=this._cueIDCounter++,n=new function(t,e,i,o){this.callback=t,this.time=e,this.id=i,this.val=o}(e,t,o,i);return this._cues.push(n),o},p5.SoundFile.prototype.removeCue=function(t){for(var e=this._cues.length,i=0;i<e;i++){this._cues[i].id===t&&this.cues.splice(i,1)}this._cues.length},p5.SoundFile.prototype.clearCues=function(){this._cues=[]},p5.SoundFile.prototype._onTimeUpdate=function(t){for(var e=t/this.buffer.sampleRate,i=this._cues.length,o=0;o<i;o++){var n=this._cues[o],s=n.time,r=n.val;this._prevTime<s&&s<=e&&n.callback(r)}this._prevTime=e}}(),a541=master,p5.Amplitude=function(t){this.bufferSize=2048,this.audiocontext=a541.audiocontext,this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1),this.input=this.processor,this.output=this.audiocontext.createGain(),this.smoothing=t||0,this.volume=0,this.average=0,this.stereoVol=[0,0],this.stereoAvg=[0,0],this.stereoVolNorm=[0,0],this.volMax=.001,this.normalize=!1,this.processor.onaudioprocess=this._audioProcess.bind(this),this.processor.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),a541.meter.connect(this.processor),a541.soundArray.push(this)},p5.Amplitude.prototype.setInput=function(t,e){a541.meter.disconnect(),e&&(this.smoothing=e),null==t?a541.meter.connect(this.processor):t instanceof p5.Signal?t.output.connect(this.processor):t?(t.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):a541.meter.connect(this.processor)},p5.Amplitude.prototype.connect=function(t){t?t.hasOwnProperty(\"input\")?this.output.connect(t.input):this.output.connect(t):this.output.connect(this.panner.connect(a541.input))},p5.Amplitude.prototype.disconnect=function(){this.output.disconnect()},p5.Amplitude.prototype._audioProcess=function(t){for(var e=0;e<t.inputBuffer.numberOfChannels;e++){for(var i,o=t.inputBuffer.getChannelData(e),n=o.length,s=0,r=0,a=0;a<n;a++)i=o[a],this.normalize?(s+=Math.max(Math.min(i/this.volMax,1),-1),r+=Math.max(Math.min(i/this.volMax,1),-1)*Math.max(Math.min(i/this.volMax,1),-1)):(s+=i,r+=i*i);var p=s/n,u=Math.sqrt(r/n);this.stereoVol[e]=Math.max(u,this.stereoVol[e]*this.smoothing),this.stereoAvg[e]=Math.max(p,this.stereoVol[e]*this.smoothing),this.volMax=Math.max(this.stereoVol[e],this.volMax)}var c=this,h=this.stereoVol.reduce(function(t,e,i){return c.stereoVolNorm[i-1]=Math.max(Math.min(c.stereoVol[i-1]/c.volMax,1),0),c.stereoVolNorm[i]=Math.max(Math.min(c.stereoVol[i]/c.volMax,1),0),t+e});this.volume=h/this.stereoVol.length,this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)},p5.Amplitude.prototype.getLevel=function(t){return void 0!==t?this.normalize?this.stereoVolNorm[t]:this.stereoVol[t]:this.normalize?this.volNorm:this.volume},p5.Amplitude.prototype.toggleNormalize=function(t){this.normalize=\"boolean\"==typeof t?t:!this.normalize},p5.Amplitude.prototype.smooth=function(t){t>=0&&t<1&&(this.smoothing=t)},amplitude=void(p5.Amplitude.prototype.dispose=function(){var t=a541.soundArray.indexOf(this);a541.soundArray.splice(t,1),this.input.disconnect(),this.output.disconnect(),this.input=this.processor=void 0,this.output=void 0}),fft=function(){var t=master;p5.FFT=function(e,i){this.input=this.analyser=t.audiocontext.createAnalyser(),Object.defineProperties(this,{bins:{get:function(){return this.analyser.fftSize/2},set:function(t){this.analyser.fftSize=2*t},configurable:!0,enumerable:!0},smoothing:{get:function(){return this.analyser.smoothingTimeConstant},set:function(t){this.analyser.smoothingTimeConstant=t},configurable:!0,enumerable:!0}}),this.smooth(e),this.bins=i||1024,t.fftMeter.connect(this.analyser),this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount),this.bass=[20,140],this.lowMid=[140,400],this.mid=[400,2600],this.highMid=[2600,5200],this.treble=[5200,14e3],t.soundArray.push(this)},p5.FFT.prototype.setInput=function(e){e?(e.output?e.output.connect(this.analyser):e.connect&&e.connect(this.analyser),t.fftMeter.disconnect()):t.fftMeter.connect(this.analyser)},p5.FFT.prototype.waveform=function(){for(var t,e,i=0;i<arguments.length;i++)\"number\"==typeof arguments[i]&&(t=arguments[i],this.analyser.fftSize=2*t),\"string\"==typeof arguments[i]&&(e=arguments[i]);if(e&&!p5.prototype._isSafari())return o(this,this.timeDomain),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;n(this,this.timeDomain),this.analyser.getByteTimeDomainData(this.timeDomain);for(var s=new Array,r=0;r<this.timeDomain.length;r++){var a=p5.prototype.map(this.timeDomain[r],0,255,-1,1);s.push(a)}return s},p5.FFT.prototype.analyze=function(){for(var t,o=0;o<arguments.length;o++)\"number\"==typeof arguments[o]&&(this.bins=arguments[o],this.analyser.fftSize=2*this.bins),\"string\"==typeof arguments[o]&&(t=arguments[o]);if(t&&\"db\"===t.toLowerCase())return e(this),this.analyser.getFloatFrequencyData(this.freqDomain),this.freqDomain;i(this,this.freqDomain),this.analyser.getByteFrequencyData(this.freqDomain);var n=Array.apply([],this.freqDomain);return n.length,this.analyser.fftSize,n.constructor,Array,n},p5.FFT.prototype.getEnergy=function(e,i){var o=t.audiocontext.sampleRate/2;if(\"bass\"===e?(e=this.bass[0],i=this.bass[1]):\"lowMid\"===e?(e=this.lowMid[0],i=this.lowMid[1]):\"mid\"===e?(e=this.mid[0],i=this.mid[1]):\"highMid\"===e?(e=this.highMid[0],i=this.highMid[1]):\"treble\"===e&&(e=this.treble[0],i=this.treble[1]),\"number\"!=typeof e)throw\"invalid input for getEnergy()\";if(i){if(e&&i){if(e>i){var n=i;i=e,e=n}for(var s=Math.round(e/o*this.freqDomain.length),r=Math.round(i/o*this.freqDomain.length),a=0,p=0,u=s;u<=r;u++)a+=this.freqDomain[u],p+=1;return a/p}throw\"invalid input for getEnergy()\"}var c=Math.round(e/o*this.freqDomain.length);return this.freqDomain[c]},p5.FFT.prototype.getFreq=function(t,e){return this.getEnergy(t,e)},p5.FFT.prototype.getCentroid=function(){for(var e=t.audiocontext.sampleRate/2,i=0,o=0,n=0;n<this.freqDomain.length;n++)i+=n*this.freqDomain[n],o+=this.freqDomain[n];var s=0;return 0!==o&&(s=i/o),s*(e/this.freqDomain.length)},p5.FFT.prototype.smooth=function(t){return void 0!==t&&(this.smoothing=t),this.smoothing},p5.FFT.prototype.dispose=function(){var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this.analyser.disconnect(),this.analyser=void 0},p5.FFT.prototype.linAverages=function(t){t=t||16;for(var e=this.freqDomain,i=e.length,o=Math.floor(i/t),n=new Array(t),s=0,r=0;r<i;r++)n[s]=void 0!==n[s]?(n[s]+e[r])/2:e[r],r%o==o-1&&s++;return n},p5.FFT.prototype.logAverages=function(e){for(var i=t.audiocontext.sampleRate/2,o=this.freqDomain,n=o.length,s=new Array(e.length),r=0,a=0;a<n;a++){Math.round(a*i/this.freqDomain.length)>e[r].hi&&r++,s[r]=void 0!==s[r]?(s[r]+o[a])/2:o[a]}return s},p5.FFT.prototype.getOctaveBands=function(e,i){e=e||3;var o=[],n={lo:(i=i||15.625)/Math.pow(2,1/(2*e)),ctr:i,hi:i*Math.pow(2,1/(2*e))};o.push(n);for(var s=t.audiocontext.sampleRate/2;n.hi<s;){var r={};r.lo=n.hi,r.ctr=n.ctr*Math.pow(2,1/e),r.hi=r.ctr*Math.pow(2,1/(2*e)),o.push(r),n=r}return o};var e=function(t){t.freqDomain instanceof Float32Array==!1&&(t.freqDomain=new Float32Array(t.analyser.frequencyBinCount))},i=function(t){t.freqDomain instanceof Uint8Array==!1&&(t.freqDomain=new Uint8Array(t.analyser.frequencyBinCount))},o=function(t){t.timeDomain instanceof Float32Array==!1&&(t.timeDomain=new Float32Array(t.analyser.frequencyBinCount))},n=function(t){t.timeDomain instanceof Uint8Array==!1&&(t.timeDomain=new Uint8Array(t.analyser.frequencyBinCount))}}(),Tone_core_Tone=function(){\"use strict\";function t(t){return void 0===t}function e(t){return\"function\"==typeof t}var i;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error(\"Web Audio is not supported in this browser\");i=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,o){if(e.input)Array.isArray(e.input)?(t(o)&&(o=0),this.connect(e.input[o])):this.connect(e.input,i,o);else try{e instanceof AudioNode?this._nativeConnect(e,i,o):this._nativeConnect(e,i)}catch(t){throw new Error(\"error connecting to node: \"+e)}};var o=function(e,i){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(i)||1===i?this.output=this.context.createGain():i>1&&(this.output=new Array(e))};o.prototype.set=function(e,i,n){if(this.isObject(e))n=i;else if(this.isString(e)){var s={};s[e]=i,e=s}for(var r in e){i=e[r];var a=this;if(-1!==r.indexOf(\".\")){for(var p=r.split(\".\"),u=0;u<p.length-1;u++)a=a[p[u]];r=p[p.length-1]}var c=a[r];t(c)||(o.Signal&&c instanceof o.Signal||o.Param&&c instanceof o.Param?c.value!==i&&(t(n)?c.value=i:c.rampTo(i,n)):c instanceof AudioParam?c.value!==i&&(c.value=i):c instanceof o?c.set(i):c!==i&&(a[r]=i))}return this},o.prototype.get=function(i){t(i)?i=this._collectDefaults(this.constructor):this.isString(i)&&(i=[i]);for(var n={},s=0;s<i.length;s++){var r=i[s],a=this,p=n;if(-1!==r.indexOf(\".\")){for(var u=r.split(\".\"),c=0;c<u.length-1;c++){var h=u[c];p[h]=p[h]||{},p=p[h],a=a[h]}r=u[u.length-1]}var l=a[r];this.isObject(i[r])?p[r]=l.get():o.Signal&&l instanceof o.Signal?p[r]=l.value:o.Param&&l instanceof o.Param?p[r]=l.value:l instanceof AudioParam?p[r]=l.value:l instanceof o?p[r]=l.get():e(l)||t(l)||(p[r]=l)}return n},o.prototype._collectDefaults=function(e){var i=[];if(t(e.defaults)||(i=Object.keys(e.defaults)),!t(e._super))for(var o=this._collectDefaults(e._super),n=0;n<o.length;n++)-1===i.indexOf(o[n])&&i.push(o[n]);return i},o.prototype.toString=function(){for(var t in o){var i=t[0].match(/^[A-Z]$/),n=o[t]===this.constructor;if(e(o[t])&&i&&n)return t}return\"Tone\"},o.context=i,o.prototype.context=o.context,o.prototype.bufferSize=2048,o.prototype.blockTime=128/o.context.sampleRate,o.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var n=null;o.prototype.noGC=function(){return this.output.connect(n),this},AudioNode.prototype.noGC=function(){return this.connect(n),this},o.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},o.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.output.disconnect(),this},o.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},o.prototype.connectParallel=function(){var t=arguments[0];if(arguments.length>1)for(var e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i)}return this},o.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},o.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=o.prototype.chain,AudioNode.prototype.fan=o.prototype.fan,o.prototype.defaultArg=function(e,i){if(this.isObject(e)&&this.isObject(i)){var o={};for(var n in e)o[n]=this.defaultArg(i[n],e[n]);for(var s in i)o[s]=this.defaultArg(e[s],i[s]);return o}return t(e)?i:e},o.prototype.optionsObject=function(t,e,i){var o={};if(1===t.length&&this.isObject(t[0]))o=t[0];else for(var n=0;n<e.length;n++)o[e[n]]=t[n];return this.isUndef(i)?o:this.defaultArg(o,i)},o.prototype.isUndef=t,o.prototype.isFunction=e,o.prototype.isNumber=function(t){return\"number\"==typeof t},o.prototype.isObject=function(t){return\"[object Object]\"===Object.prototype.toString.call(t)&&t.constructor===Object},o.prototype.isBoolean=function(t){return\"boolean\"==typeof t},o.prototype.isArray=function(t){return Array.isArray(t)},o.prototype.isString=function(t){return\"string\"==typeof t},o.noOp=function(){},o.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},o.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},o.State={Started:\"started\",Stopped:\"stopped\",Paused:\"paused\"},o.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},o.prototype.dbToGain=function(t){return Math.pow(2,t/6)},o.prototype.gainToDb=function(t){return Math.log(t)/Math.LN10*20},o.prototype.now=function(){return this.context.currentTime},o.extend=function(e,i){function n(){}t(i)&&(i=o),n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e,e._super=i};var s=[];return o._initAudioContext=function(t){t(o.context),s.push(t)},o.setContext=function(t){o.prototype.context=t,o.context=t;for(var e=0;e<s.length;e++)s[e](t)},o.startMobile=function(){var t=o.context.createOscillator(),e=o.context.createGain();e.gain.value=0,t.connect(e),e.connect(o.context.destination);var i=o.context.currentTime;t.start(i),t.stop(i+1)},o._initAudioContext(function(t){o.prototype.blockTime=128/t.sampleRate,(n=t.createGain()).gain.value=0,n.connect(t.destination)}),o.version=\"r7-dev\",o}(),Tone_signal_SignalBase=function(t){\"use strict\";return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,o){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,o),this},t.SignalBase}(Tone_core_Tone),Tone_signal_WaveShaper=function(t){\"use strict\";return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;e<i;e++){var o=e/i*2-1;this._curve[e]=t(o,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,\"curve\",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(t){if(-1===[\"none\",\"2x\",\"4x\"].indexOf(t))throw new Error(\"invalid oversampling: \"+t);this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}(Tone_core_Tone),Tone_core_Type=function(Tone){\"use strict\";var a819,a823,a827,a831,a835,a839;function getTransportBpm(){return Tone.Transport&&Tone.Transport.bpm?Tone.Transport.bpm.value:120}function getTransportTimeSignature(){return Tone.Transport&&Tone.Transport.timeSignature?Tone.Transport.timeSignature:4}function toNotationHelper(t,e,i,o){for(var n=this.toSeconds(t),s=this.notationToSeconds(o[o.length-1],e,i),r=\"\",a=0;a<o.length;a++){var p=this.notationToSeconds(o[a],e,i),u=n/p;if(1-u%1<1e-6&&(u+=1e-6),(u=Math.floor(u))>0){if(r+=1===u?o[a]:u.toString()+\"*\"+o[a],(n-=u*p)<s)break;r+=\" + \"}}return\"\"===r&&(r=\"0\"),r}Tone.Type={Default:\"number\",Time:\"time\",Frequency:\"frequency\",NormalRange:\"normalRange\",AudioRange:\"audioRange\",Decibels:\"db\",Interval:\"interval\",BPM:\"bpm\",Positive:\"positive\",Cents:\"cents\",Degrees:\"degrees\",MIDI:\"midi\",TransportTime:\"transportTime\",Ticks:\"tick\",Note:\"note\",Milliseconds:\"milliseconds\",Notation:\"notation\"},Tone.prototype.isNowRelative=(a819=new RegExp(/^\\s*\\+(.)+/i),function(t){return a819.test(t)}),Tone.prototype.isTicks=(a823=new RegExp(/^\\d+i$/i),function(t){return a823.test(t)}),Tone.prototype.isNotation=(a827=new RegExp(/^[0-9]+[mnt]$/i),function(t){return a827.test(t)}),Tone.prototype.isTransportTime=(a831=new RegExp(/^(\\d+(\\.\\d+)?\\:){1,2}(\\d+(\\.\\d+)?)?$/i),function(t){return a831.test(t)}),Tone.prototype.isNote=(a835=new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i),function(t){return a835.test(t)}),Tone.prototype.isFrequency=(a839=new RegExp(/^\\d*\\.?\\d+hz$/i),function(t){return a839.test(t)}),Tone.prototype.notationToSeconds=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var o=60/e;\"1n\"===t&&(t=\"1m\");var n=parseInt(t,10);var s=t.slice(-1);return o*(\"t\"===s?4/n*2/3:\"n\"===s?4/n:\"m\"===s?n*i:0)},Tone.prototype.transportTimeToSeconds=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var o=0,n=0,s=0,r=t.split(\":\");return 2===r.length?(o=parseFloat(r[0]),n=parseFloat(r[1])):1===r.length?n=parseFloat(r[0]):3===r.length&&(o=parseFloat(r[0]),n=parseFloat(r[1]),s=parseFloat(r[2])),(o*i+n+s/4)*(60/e)},Tone.prototype.ticksToSeconds=function(t,e){return this.isUndef(Tone.Transport)?0:(t=parseFloat(t),60/(e=this.defaultArg(e,getTransportBpm()))/Tone.Transport.PPQ*t)},Tone.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},Tone.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},Tone.prototype.secondsToSamples=function(t){return t*this.context.sampleRate},Tone.prototype.secondsToTransportTime=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var o=t/(60/e),n=o%1*4;return[Math.floor(o/i),o=Math.floor(o)%i,n].join(\":\")},Tone.prototype.secondsToFrequency=function(t){return 1/t},Tone.prototype.toTransportTime=function(t,e,i){var o=this.toSeconds(t);return this.secondsToTransportTime(o,e,i)},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):this.isNote(t)?this.noteToFrequency(t):t},Tone.prototype.toTicks=function(t){if(this.isUndef(Tone.Transport))return 0;var e=Tone.Transport.bpm.value,i=0;if(this.isNowRelative(t))t=t.replace(\"+\",\"\"),i=Tone.Transport.ticks;else if(this.isUndef(t))return Tone.Transport.ticks;var o=this.toSeconds(t)/(60/e)*Tone.Transport.PPQ;return Math.round(o+i)},Tone.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},Tone.prototype.toSeconds=function(time,now){if(now=this.defaultArg(now,this.now()),this.isNumber(time))return time;if(this.isString(time)){var plusTime=0;this.isNowRelative(time)&&(time=time.replace(\"+\",\"\"),plusTime=now);var betweenParens=time.match(/\\(([^)(]+)\\)/g);if(betweenParens)for(var j=0;j<betweenParens.length;j++){var symbol=betweenParens[j].replace(/[\\(\\)]/g,\"\"),symbolVal=this.toSeconds(symbol);time=time.replace(betweenParens[j],symbolVal)}if(-1!==time.indexOf(\"@\")){var quantizationSplit=time.split(\"@\");if(this.isUndef(Tone.Transport))throw new Error(\"quantization requires Tone.Transport\");var toQuantize=quantizationSplit[0].trim();\"\"===toQuantize&&(toQuantize=void 0),plusTime>0&&(toQuantize=\"+\"+toQuantize,plusTime=0);var subdivision=quantizationSplit[1].trim();time=Tone.Transport.quantize(toQuantize,subdivision)}else{var components=time.split(/[\\(\\)\\-\\+\\/\\*]/);if(components.length>1){for(var originalTime=time,i=0;i<components.length;i++){var symb=components[i].trim();if(\"\"!==symb){var val=this.toSeconds(symb);time=time.replace(symb,val)}}try{time=eval(time)}catch(t){throw new EvalError(\"cannot evaluate Time: \"+originalTime)}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):this.isTicks(time)?this.ticksToSeconds(time):parseFloat(time)}return time+plusTime}return now},Tone.prototype.toNotation=function(t,e,i){var o=toNotationHelper.call(this,t,e,i,[\"1m\",\"2n\",\"4n\",\"8n\",\"16n\",\"32n\",\"64n\",\"128n\"]),n=toNotationHelper.call(this,t,e,i,[\"1m\",\"2n\",\"2t\",\"4n\",\"4t\",\"8n\",\"8t\",\"16n\",\"16t\",\"32n\",\"32t\",\"64n\",\"64t\",\"128n\"]);return n.split(\"+\").length<o.split(\"+\").length?n:o},Tone.prototype.fromUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Time:return this.toSeconds(t);case Tone.Type.Frequency:return this.toFrequency(t);case Tone.Type.Decibels:return this.dbToGain(t);case Tone.Type.NormalRange:return Math.min(Math.max(t,0),1);case Tone.Type.AudioRange:return Math.min(Math.max(t,-1),1);case Tone.Type.Positive:return Math.max(t,0);default:return t}},Tone.prototype.toUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Decibels:return this.gainToDb(t);default:return t}};var noteToScaleIndex={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},scaleIndexToNote=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"];return Tone.A4=440,Tone.prototype.noteToFrequency=function(t){var e=t.split(/(-?\\d+)/);if(3===e.length){var i=noteToScaleIndex[e[0].toLowerCase()],o=e[1],n=i+12*(parseInt(o,10)+1);return this.midiToFrequency(n)}return 0},Tone.prototype.frequencyToNote=function(t){var e=Math.log(t/Tone.A4)/Math.LN2,i=Math.round(12*e)+57,o=Math.floor(i/12);return o<0&&(i+=-12*o),scaleIndexToNote[i%12]+o.toString()},Tone.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},Tone.prototype.midiToNote=function(t){var e=Math.floor(t/12)-1;return scaleIndexToNote[t%12]+e},Tone.prototype.noteToMidi=function(t){var e=t.split(/(\\d+)/);if(3===e.length){var i=noteToScaleIndex[e[0].toLowerCase()],o=e[1];return i+12*(parseInt(o,10)+1)}return 0},Tone.prototype.midiToFrequency=function(t){return Tone.A4*Math.pow(2,(t-69)/12)},Tone}(Tone_core_Tone),Tone_core_Param=function(t){\"use strict\";return t.Param=function(){var e=this.optionsObject(arguments,[\"param\",\"units\",\"convert\"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,\"value\",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._param.value=e}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.setValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e){var i=this.now(),o=this.value;return this.setValueAtTime(Math.max(o,this._minOutput),i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e){var i=this.now();return this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var o=0;o<t.length;o++)t[o]=this._fromUnits(t[o]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,i):this.linearRampToValue(e,i),this},t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this},t.Param}(Tone_core_Tone),Tone_core_Gain=function(t){\"use strict\";return t.Gain=function(){var e=this.optionsObject(arguments,[\"gain\",\"units\"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly(\"gain\")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable(\"gain\"),this.gain.dispose(),this.gain=null},t.Gain}(Tone_core_Tone),Tone_signal_Signal=function(t){\"use strict\";return t.Signal=function(){var e=this.optionsObject(arguments,[\"value\",\"units\"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var i=e.createBuffer(1,128,e.sampleRate),o=i.getChannelData(0),n=0;n<o.length;n++)o[n]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode=\"explicit\",t.Signal._constant.buffer=i,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}(Tone_core_Tone),Tone_signal_Add=function(t){\"use strict\";return t.Add=function(e){t.call(this,2,0),this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}(Tone_core_Tone),Tone_signal_Multiply=function(t){\"use strict\";return t.Multiply=function(e){t.call(this,2,0),this._mult=this.input[0]=this.output=this.context.createGain(),this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.disconnect(),this._mult=null,this._param=null,this},t.Multiply}(Tone_core_Tone),Tone_signal_Scale=function(t){\"use strict\";return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,\"min\",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,\"max\",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}(Tone_core_Tone),a1068=Tone_signal_Signal,a1069=Tone_signal_Add,a1070=Tone_signal_Multiply,a1071=Tone_signal_Scale,a1073=master,Tone_core_Tone.setContext(a1073.audiocontext),p5.Signal=function(t){return new a1068(t)},a1068.prototype.fade=a1068.prototype.linearRampToValueAtTime,a1070.prototype.fade=a1068.prototype.fade,a1069.prototype.fade=a1068.prototype.fade,a1071.prototype.fade=a1068.prototype.fade,a1068.prototype.setInput=function(t){t.connect(this)},a1070.prototype.setInput=a1068.prototype.setInput,a1069.prototype.setInput=a1068.prototype.setInput,a1071.prototype.setInput=a1068.prototype.setInput,a1068.prototype.add=function(t){var e=new a1069(t);return this.connect(e),e},a1070.prototype.add=a1068.prototype.add,a1069.prototype.add=a1068.prototype.add,a1071.prototype.add=a1068.prototype.add,a1068.prototype.mult=function(t){var e=new a1070(t);return this.connect(e),e},a1070.prototype.mult=a1068.prototype.mult,a1069.prototype.mult=a1068.prototype.mult,a1071.prototype.mult=a1068.prototype.mult,a1068.prototype.scale=function(t,e,i,o){var n,s;4===arguments.length?(n=p5.prototype.map(i,t,e,0,1)-.5,s=p5.prototype.map(o,t,e,0,1)-.5):(n=arguments[0],s=arguments[1]);var r=new a1071(n,s);return this.connect(r),r},a1070.prototype.scale=a1068.prototype.scale,a1069.prototype.scale=a1068.prototype.scale,signal=void(a1071.prototype.scale=a1068.prototype.scale),oscillator=function(){var t=master,e=Tone_signal_Add,i=Tone_signal_Multiply,o=Tone_signal_Scale;p5.Oscillator=function(e,i){if(\"string\"==typeof e){var o=i;i=e,e=o}if(\"number\"==typeof i){o=i;i=e,e=o}this.started=!1,this.phaseAmount=void 0,this.oscillator=t.audiocontext.createOscillator(),this.f=e||440,this.oscillator.type=i||\"sine\",this.oscillator.frequency.setValueAtTime(this.f,t.audiocontext.currentTime),this.output=t.audiocontext.createGain(),this._freqMods=[],this.output.gain.value=.5,this.output.gain.setValueAtTime(.5,t.audiocontext.currentTime),this.oscillator.connect(this.output),this.panPosition=0,this.connection=t.input,this.panner=new p5.Panner(this.output,this.connection,1),this.mathOps=[this.output],t.soundArray.push(this)},p5.Oscillator.prototype.start=function(e,i){if(this.started){var o=t.audiocontext.currentTime;this.stop(o)}if(!this.started){var n=i||this.f,s=this.oscillator.type;this.oscillator&&(this.oscillator.disconnect(),this.oscillator=void 0),this.oscillator=t.audiocontext.createOscillator(),this.oscillator.frequency.value=Math.abs(n),this.oscillator.type=s,this.oscillator.connect(this.output),e=e||0,this.oscillator.start(e+t.audiocontext.currentTime),this.freqNode=this.oscillator.frequency;for(var r in this._freqMods)void 0!==this._freqMods[r].connect&&this._freqMods[r].connect(this.oscillator.frequency);this.started=!0}},p5.Oscillator.prototype.stop=function(e){if(this.started){var i=e||0,o=t.audiocontext.currentTime;this.oscillator.stop(i+o),this.started=!1}},p5.Oscillator.prototype.amp=function(e,i,o){if(\"number\"==typeof e){i=i||0,o=o||0;var n=t.audiocontext.currentTime;this.output.gain.linearRampToValueAtTime(e,n+o+i)}else{if(!e)return this.output.gain;e.connect(this.output.gain)}},p5.Oscillator.prototype.fade=p5.Oscillator.prototype.amp,p5.Oscillator.prototype.getAmp=function(){return this.output.gain.value},p5.Oscillator.prototype.freq=function(e,i,o){if(\"number\"!=typeof e||isNaN(e)){if(!e)return this.oscillator.frequency;e.output&&(e=e.output),e.connect(this.oscillator.frequency),this._freqMods.push(e)}else{this.f=e;var n=t.audiocontext.currentTime;i=i||0,o=o||0;0===i?(this.oscillator.frequency.cancelScheduledValues(n),this.oscillator.frequency.setValueAtTime(e,o+n)):e>0?this.oscillator.frequency.exponentialRampToValueAtTime(e,o+i+n):this.oscillator.frequency.linearRampToValueAtTime(e,o+i+n),this.phaseAmount&&this.phase(this.phaseAmount)}},p5.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value},p5.Oscillator.prototype.setType=function(t){this.oscillator.type=t},p5.Oscillator.prototype.getType=function(){return this.oscillator.type},p5.Oscillator.prototype.connect=function(e){e?e.hasOwnProperty(\"input\")?(this.panner.connect(e.input),this.connection=e.input):(this.panner.connect(e),this.connection=e):this.panner.connect(t.input)},p5.Oscillator.prototype.disconnect=function(){this.output.disconnect(),this.panner.disconnect(),this.output.connect(this.panner),this.oscMods=[]},p5.Oscillator.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},p5.Oscillator.prototype.getPan=function(){return this.panPosition},p5.Oscillator.prototype.dispose=function(){var e=t.soundArray.indexOf(this);if(t.soundArray.splice(e,1),this.oscillator){var i=t.audiocontext.currentTime;this.stop(i),this.disconnect(),this.panner=null,this.oscillator=null}this.osc2&&this.osc2.dispose()},p5.Oscillator.prototype.phase=function(e){var i=p5.prototype.map(e,0,1,0,1/this.f),o=t.audiocontext.currentTime;this.phaseAmount=e,this.dNode||(this.dNode=t.audiocontext.createDelay(),this.oscillator.disconnect(),this.oscillator.connect(this.dNode),this.dNode.connect(this.output)),this.dNode.delayTime.setValueAtTime(i,o)};var n=function(t,e,i,o,n){var s=t.oscillator;for(var r in t.mathOps)t.mathOps[r]instanceof n&&(s.disconnect(),t.mathOps[r].dispose(),(i=r)<t.mathOps.length-2&&(o=t.mathOps[r+1]));return i===t.mathOps.length-1&&t.mathOps.push(o),r>0&&(s=t.mathOps[r-1]),s.disconnect(),s.connect(e),e.connect(o),t.mathOps[i]=e,t};p5.Oscillator.prototype.add=function(t){var i=new e(t),o=this.mathOps.length-1,s=this.output;return n(this,i,o,s,e)},p5.Oscillator.prototype.mult=function(t){var e=new i(t),o=this.mathOps.length-1,s=this.output;return n(this,e,o,s,i)},p5.Oscillator.prototype.scale=function(t,e,i,s){var r,a;4===arguments.length?(r=p5.prototype.map(i,t,e,0,1)-.5,a=p5.prototype.map(s,t,e,0,1)-.5):(r=arguments[0],a=arguments[1]);var p=new o(r,a),u=this.mathOps.length-1,c=this.output;return n(this,p,u,c,o)},p5.SinOsc=function(t){p5.Oscillator.call(this,t,\"sine\")},p5.SinOsc.prototype=Object.create(p5.Oscillator.prototype),p5.TriOsc=function(t){p5.Oscillator.call(this,t,\"triangle\")},p5.TriOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SawOsc=function(t){p5.Oscillator.call(this,t,\"sawtooth\")},p5.SawOsc.prototype=Object.create(p5.Oscillator.prototype),p5.SqrOsc=function(t){p5.Oscillator.call(this,t,\"square\")},p5.SqrOsc.prototype=Object.create(p5.Oscillator.prototype)}(),Tone_core_Timeline=function(t){\"use strict\";return t.Timeline=function(){var e=this.optionsObject(arguments,[\"memory\"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,\"length\",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error(\"events must have a time attribute\");if(t.time=this.toSeconds(t.time),this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){t=this.toSeconds(t);var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){t=this.toSeconds(t);var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){t=this.toSeconds(t);var e=this._search(t);return e-1>=0?this._timeline[e-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){t=this.toSeconds(t);var e=this._search(t);this._timeline=e>=0?this._timeline.slice(0,e):[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){t=this.toSeconds(t);var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){for(var e=0,i=this._timeline.length,o=i;e<=o&&e<i;){var n=Math.floor(e+(o-e)/2),s=this._timeline[n];if(s.time===t){for(var r=n;r<this._timeline.length;r++){this._timeline[r].time===t&&(n=r)}return n}s.time>t?o=n-1:s.time<t&&(e=n+1)}return e-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var o=e;o<=i;o++)t(this._timeline[o]);if(this._iterating=!1,this._toRemove.length>0){for(var n=0;n<this._toRemove.length;n++){var s=this._timeline.indexOf(this._toRemove[n]);-1!==s&&this._timeline.splice(s,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){t=this.toSeconds(t);var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){t=this.toSeconds(t);for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}(Tone_core_Tone),Tone_signal_TimelineSignal=function(t){\"use strict\";return t.TimelineSignal=function(){var e=this.optionsObject(arguments,[\"value\",\"units\"],t.Signal.defaults);t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._events=new t.Timeline(10),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:\"linear\",Exponential:\"exponential\",Target:\"target\",Set:\"set\"},Object.defineProperty(t.TimelineSignal.prototype,\"value\",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._initial=e,this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:e,time:i}),this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,o){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),o=Math.max(this._minOutput,o),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:o}),this._param.setTargetAtTime(e,i,o),this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return this._events.cancel(t),this._param.cancelScheduledValues(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this.getValueAtTime(e),o=this._searchAfter(e);return o&&(this.cancelScheduledValues(e),o.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):o.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var i=this._searchAfter(e),o=this._searchBefore(e),n=this._initial;if(null===o)n=this._initial;else if(o.type===t.TimelineSignal.Type.Target){var s,r=this._events.getEventBefore(o.time);s=null===r?this._initial:r.value,n=this._exponentialApproach(o.time,s,o.value,o.constant,e)}else n=null===i?o.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(o.time,o.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(o.time,o.value,i.time,i.value,e):o.value;return n},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,o,n){return i+(e-i)*Math.exp(-(n-t)/o)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,o,n){return e+(n-t)/(i-t)*(o-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,o,n){return(e=Math.max(this._minOutput,e))*Math.pow(o/e,(n-t)/(i-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}(Tone_core_Tone),a1314=master,a1315=Tone_signal_Add,a1316=Tone_signal_Multiply,a1317=Tone_signal_Scale,a1318=Tone_signal_TimelineSignal,Tone_core_Tone.setContext(a1314.audiocontext),p5.Env=function(t,e,i,o,n,s){this.aTime=t||.1,this.aLevel=e||1,this.dTime=i||.5,this.dLevel=o||0,this.rTime=n||0,this.rLevel=s||0,this._rampHighPercentage=.98,this._rampLowPercentage=.02,this.output=a1314.audiocontext.createGain(),this.control=new a1318,this._init(),this.control.connect(this.output),this.connection=null,this.mathOps=[this.control],this.isExponential=!1,this.sourceToClear=null,this.wasTriggered=!1,a1314.soundArray.push(this)},p5.Env.prototype._init=function(){var t=a1314.audiocontext.currentTime;this.control.setTargetAtTime(1e-5,t,.001),this._setRampAD(this.aTime,this.dTime)},p5.Env.prototype.set=function(t,e,i,o,n,s){this.aTime=t,this.aLevel=e,this.dTime=i||0,this.dLevel=o||0,this.rTime=n||0,this.rLevel=s||0,this._setRampAD(t,i)},p5.Env.prototype.setADSR=function(t,e,i,o){this.aTime=t,this.dTime=e||0,this.sPercent=i||0,this.dLevel=void 0!==i?i*(this.aLevel-this.rLevel)+this.rLevel:0,this.rTime=o||0,this._setRampAD(t,e)},p5.Env.prototype.setRange=function(t,e){this.aLevel=t||1,this.rLevel=e||0},p5.Env.prototype._setRampAD=function(t,e){this._rampAttackTime=this.checkExpInput(t),this._rampDecayTime=this.checkExpInput(e);var i=1;i=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=t/this.checkExpInput(i),i=Math.log(1/this._rampLowPercentage),this._rampDecayTC=e/this.checkExpInput(i)},p5.Env.prototype.setRampPercentages=function(t,e){this._rampHighPercentage=this.checkExpInput(t),this._rampLowPercentage=this.checkExpInput(e);var i=1;i=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=this._rampAttackTime/this.checkExpInput(i),i=Math.log(1/this._rampLowPercentage),this._rampDecayTC=this._rampDecayTime/this.checkExpInput(i)},p5.Env.prototype.setInput=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t])},p5.Env.prototype.setExp=function(t){this.isExponential=t},p5.Env.prototype.checkExpInput=function(t){return t<=0&&(t=1e-8),t},p5.Env.prototype.play=function(t,e,i){var o=e||0;i=i||0,t&&this.connection!==t&&this.connect(t),this.triggerAttack(t,o),this.triggerRelease(t,o+this.aTime+this.dTime+i)},p5.Env.prototype.triggerAttack=function(t,e){var i=a1314.audiocontext.currentTime+(e||0);this.lastAttack=i,this.wasTriggered=!0,t&&this.connection!==t&&this.connect(t);var o=this.control.getValueAtTime(i);this.control.cancelScheduledValues(i),!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(o),i):this.control.linearRampToValueAtTime(o,i),i+=this.aTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel),i),o=this.checkExpInput(this.control.getValueAtTime(i)),this.control.cancelScheduledValues(i),this.control.exponentialRampToValueAtTime(o,i)):(this.control.linearRampToValueAtTime(this.aLevel,i),o=this.control.getValueAtTime(i),this.control.cancelScheduledValues(i),this.control.linearRampToValueAtTime(o,i)),i+=this.dTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel),i),o=this.checkExpInput(this.control.getValueAtTime(i)),this.control.cancelScheduledValues(i),this.control.exponentialRampToValueAtTime(o,i)):(this.control.linearRampToValueAtTime(this.dLevel,i),o=this.control.getValueAtTime(i),this.control.cancelScheduledValues(i),this.control.linearRampToValueAtTime(o,i))},p5.Env.prototype.triggerRelease=function(t,e){if(this.wasTriggered){var i=a1314.audiocontext.currentTime+(e||0);t&&this.connection!==t&&this.connect(t);var o=this.control.getValueAtTime(i);this.control.cancelScheduledValues(i),!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(o),i):this.control.linearRampToValueAtTime(o,i),i+=this.rTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel),i),o=this.checkExpInput(this.control.getValueAtTime(i)),this.control.cancelScheduledValues(i),this.control.exponentialRampToValueAtTime(o,i)):(this.control.linearRampToValueAtTime(this.rLevel,i),o=this.control.getValueAtTime(i),this.control.cancelScheduledValues(i),this.control.linearRampToValueAtTime(o,i)),this.wasTriggered=!1}},p5.Env.prototype.ramp=function(t,e,i,o){var n=a1314.audiocontext.currentTime+(e||0),s=this.checkExpInput(i),r=void 0!==o?this.checkExpInput(o):void 0;t&&this.connection!==t&&this.connect(t);var a=this.checkExpInput(this.control.getValueAtTime(n));this.control.cancelScheduledValues(n),s>a?(this.control.setTargetAtTime(s,n,this._rampAttackTC),n+=this._rampAttackTime):s<a&&(this.control.setTargetAtTime(s,n,this._rampDecayTC),n+=this._rampDecayTime),void 0!==r&&(r>s?this.control.setTargetAtTime(r,n,this._rampAttackTC):r<s&&this.control.setTargetAtTime(r,n,this._rampDecayTC))},p5.Env.prototype.connect=function(t){this.connection=t,(t instanceof p5.Oscillator||t instanceof p5.SoundFile||t instanceof p5.AudioIn||t instanceof p5.Reverb||t instanceof p5.Noise||t instanceof p5.Filter||t instanceof p5.Delay)&&(t=t.output.gain),t instanceof AudioParam&&t.setValueAtTime(0,a1314.audiocontext.currentTime),t instanceof p5.Signal&&t.setValue(0),this.output.connect(t)},p5.Env.prototype.disconnect=function(){this.output.disconnect()},p5.Env.prototype.add=function(t){var e=new a1315(t),i=this.mathOps.length,o=this.output;return p5.prototype._mathChain(this,e,i,o,a1315)},p5.Env.prototype.mult=function(t){var e=new a1316(t),i=this.mathOps.length,o=this.output;return p5.prototype._mathChain(this,e,i,o,a1316)},p5.Env.prototype.scale=function(t,e,i,o){var n=new a1317(t,e,i,o),s=this.mathOps.length,r=this.output;return p5.prototype._mathChain(this,n,s,r,a1317)},env=void(p5.Env.prototype.dispose=function(){var t=a1314.soundArray.indexOf(this);a1314.soundArray.splice(t,1),this.disconnect();try{this.control.dispose(),this.control=null}catch(t){}for(var e=1;e<this.mathOps.length;e++)this.mathOps[e].dispose()}),pulse=function(){var t=master;function e(){for(var e=t.audiocontext,i=e.createBuffer(1,2048,e.sampleRate),o=i.getChannelData(0),n=0;n<2048;n++)o[n]=1;var s=e.createBufferSource();return s.buffer=i,s.loop=!0,s}p5.Pulse=function(i,o){p5.Oscillator.call(this,i,\"sawtooth\"),this.w=o||0,this.osc2=new p5.SawOsc(i),this.dNode=t.audiocontext.createDelay(),this.dcOffset=e(),this.dcGain=t.audiocontext.createGain(),this.dcOffset.connect(this.dcGain),this.dcGain.connect(this.output),this.f=i||440;var n=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=n,this.dcGain.gain.value=1.7*(.5-this.w),this.osc2.disconnect(),this.osc2.panner.disconnect(),this.osc2.amp(-1),this.osc2.output.connect(this.dNode),this.dNode.connect(this.output),this.output.gain.value=1,this.output.connect(this.panner)},p5.Pulse.prototype=Object.create(p5.Oscillator.prototype),p5.Pulse.prototype.width=function(t){if(\"number\"==typeof t){if(t<=1&&t>=0){this.w=t;var e=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=e}this.dcGain.gain.value=1.7*(.5-this.w)}else{t.connect(this.dNode.delayTime);var i=new p5.SignalAdd(-.5);i.setInput(t),(i=(i=i.mult(-1)).mult(1.7)).connect(this.dcGain.gain)}},p5.Pulse.prototype.start=function(i,o){var n=t.audiocontext.currentTime,s=o||0;if(!this.started){var r=i||this.f,a=this.oscillator.type;this.oscillator=t.audiocontext.createOscillator(),this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.type=a,this.oscillator.connect(this.output),this.oscillator.start(s+n),this.osc2.oscillator=t.audiocontext.createOscillator(),this.osc2.oscillator.frequency.setValueAtTime(r,s+n),this.osc2.oscillator.type=a,this.osc2.oscillator.connect(this.osc2.output),this.osc2.start(s+n),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],this.dcOffset=e(),this.dcOffset.connect(this.dcGain),this.dcOffset.start(s+n),void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1])),this.started=!0,this.osc2.started=!0}},p5.Pulse.prototype.stop=function(e){if(this.started){var i=e||0,o=t.audiocontext.currentTime;this.oscillator.stop(i+o),this.osc2.oscillator.stop(i+o),this.dcOffset.stop(i+o),this.started=!1,this.osc2.started=!1}},p5.Pulse.prototype.freq=function(e,i,o){if(\"number\"==typeof e){this.f=e;var n=t.audiocontext.currentTime,s=(i=i||0,o=o||0,this.oscillator.frequency.value);this.oscillator.frequency.cancelScheduledValues(n),this.oscillator.frequency.setValueAtTime(s,n+o),this.oscillator.frequency.exponentialRampToValueAtTime(e,o+i+n),this.osc2.oscillator.frequency.cancelScheduledValues(n),this.osc2.oscillator.frequency.setValueAtTime(s,n+o),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(e,o+i+n),this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else e.output&&(e.output.disconnect(),e.output.connect(this.oscillator.frequency),e.output.connect(this.osc2.oscillator.frequency),this.freqMod=e)}}(),noise=function(){var t=master;p5.Noise=function(t){var n;p5.Oscillator.call(this),delete this.f,delete this.freq,delete this.oscillator,n=\"brown\"===t?o:\"pink\"===t?i:e,this.buffer=n},p5.Noise.prototype=Object.create(p5.Oscillator.prototype);var e=function(){for(var e=2*t.audiocontext.sampleRate,i=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),o=i.getChannelData(0),n=0;n<e;n++)o[n]=2*Math.random()-1;return i.type=\"white\",i}(),i=function(){var e,i,o,n,s,r,a,p=2*t.audiocontext.sampleRate,u=t.audiocontext.createBuffer(1,p,t.audiocontext.sampleRate),c=u.getChannelData(0);e=i=o=n=s=r=a=0;for(var h=0;h<p;h++){var l=2*Math.random()-1;e=.99886*e+.0555179*l,i=.99332*i+.0750759*l,o=.969*o+.153852*l,n=.8665*n+.3104856*l,s=.55*s+.5329522*l,r=-.7616*r-.016898*l,c[h]=e+i+o+n+s+r+a+.5362*l,c[h]*=.11,a=.115926*l}return u.type=\"pink\",u}(),o=function(){for(var e=2*t.audiocontext.sampleRate,i=t.audiocontext.createBuffer(1,e,t.audiocontext.sampleRate),o=i.getChannelData(0),n=0,s=0;s<e;s++){var r=2*Math.random()-1;o[s]=(n+.02*r)/1.02,n=o[s],o[s]*=3.5}return i.type=\"brown\",i}();p5.Noise.prototype.setType=function(n){switch(n){case\"white\":this.buffer=e;break;case\"pink\":this.buffer=i;break;case\"brown\":this.buffer=o;break;default:this.buffer=e}if(this.started){var s=t.audiocontext.currentTime;this.stop(s),this.start(s+.01)}},p5.Noise.prototype.getType=function(){return this.buffer.type},p5.Noise.prototype.start=function(){this.started&&this.stop(),this.noise=t.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output);var e=t.audiocontext.currentTime;this.noise.start(e),this.started=!0},p5.Noise.prototype.stop=function(){var e=t.audiocontext.currentTime;this.noise&&(this.noise.stop(e),this.started=!1)},p5.Noise.prototype.dispose=function(){var e=t.audiocontext.currentTime,i=t.soundArray.indexOf(this);t.soundArray.splice(i,1),this.noise&&(this.noise.disconnect(),this.stop(e)),this.output&&this.output.disconnect(),this.panner&&this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise=null}}(),a1496=master,p5.AudioIn=function(t){this.input=a1496.audiocontext.createGain(),this.output=a1496.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=0,this.enabled=!1,this.amplitude=new p5.Amplitude,this.output.connect(this.amplitude.input),void 0===window.MediaStreamTrack?t?t():window.alert(\"This browser does not support AudioIn\"):\"function\"==typeof window.MediaDevices.enumerateDevices&&window.MediaDevices.enumerateDevices(this._gotSources),a1496.soundArray.push(this)},p5.AudioIn.prototype.start=function(t,e){var i=this;if(a1496.inputSources[i.currentSource]){var o={audio:{optional:[{sourceId:a1496.inputSources[i.currentSource].id}]}};window.navigator.getUserMedia(o,this._onStream=function(e){i.stream=e,i.enabled=!0,i.mediaStream=a1496.audiocontext.createMediaStreamSource(e),i.mediaStream.connect(i.output),t&&t(),i.amplitude.setInput(i.output)},this._onStreamError=function(t){e&&e(t)})}else window.navigator.getUserMedia({audio:!0},this._onStream=function(e){i.stream=e,i.enabled=!0,i.mediaStream=a1496.audiocontext.createMediaStreamSource(e),i.mediaStream.connect(i.output),i.amplitude.setInput(i.output),t&&t()},this._onStreamError=function(t){e&&e(t)})},p5.AudioIn.prototype.stop=function(){this.stream&&this.stream.getTracks()[0].stop()},p5.AudioIn.prototype.connect=function(t){t?t.hasOwnProperty(\"input\")?this.output.connect(t.input):t.hasOwnProperty(\"analyser\")?this.output.connect(t.analyser):this.output.connect(t):this.output.connect(a1496.input)},p5.AudioIn.prototype.disconnect=function(){this.output.disconnect(),this.output.connect(this.amplitude.input)},p5.AudioIn.prototype.getLevel=function(t){return t&&(this.amplitude.smoothing=t),this.amplitude.getLevel()},p5.AudioIn.prototype._gotSources=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(\"audio\"===i.kind)return i}},p5.AudioIn.prototype.amp=function(t,e){if(e){var i=e||0,o=this.output.gain.value;this.output.gain.cancelScheduledValues(a1496.audiocontext.currentTime),this.output.gain.setValueAtTime(o,a1496.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(t,i+a1496.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(a1496.audiocontext.currentTime),this.output.gain.setValueAtTime(t,a1496.audiocontext.currentTime)},p5.AudioIn.prototype.listSources=function(){return a1496.inputSources.length>0?a1496.inputSources:\"This browser does not support MediaStreamTrack.getSources()\"},p5.AudioIn.prototype.getSources=function(t){\"function\"==typeof window.MediaStreamTrack.getSources&&window.MediaStreamTrack.getSources(function(e){for(var i=0,o=e.length;i<o;i++){var n=e[i];\"audio\"===n.kind&&a1496.inputSources.push(n)}t(a1496.inputSources)})},p5.AudioIn.prototype.setSource=function(t){a1496.inputSources.length>0&&t<a1496.inputSources.length&&(this.currentSource=t)},audioin=void(p5.AudioIn.prototype.dispose=function(){var t=a1496.soundArray.indexOf(this);a1496.soundArray.splice(t,1),this.stop(),this.output&&this.output.disconnect(),this.amplitude&&this.amplitude.disconnect(),this.amplitude=null,this.output=null}),Tone_signal_Negate=function(t){\"use strict\";return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}(Tone_core_Tone),Tone_signal_Subtract=function(t){\"use strict\";return t.Subtract=function(e){t.call(this,2,0),this._sum=this.input[0]=this.output=this.context.createGain(),this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}(Tone_core_Tone),Tone_signal_GreaterThanZero=function(t){\"use strict\";return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1}),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}(Tone_core_Tone),Tone_signal_EqualZero=function(t){\"use strict\";return t.EqualZero=function(){this._scale=this.input=new t.Multiply(1e4),this._thresh=new t.WaveShaper(function(t){return 0===t?1:0},128),this._gtz=this.output=new t.GreaterThanZero,this._scale.chain(this._thresh,this._gtz)},t.extend(t.EqualZero,t.SignalBase),t.EqualZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.EqualZero}(Tone_core_Tone),Tone_signal_Equal=function(t){\"use strict\";return t.Equal=function(e){t.call(this,2,0),this._sub=this.input[0]=new t.Subtract(e),this._equals=this.output=new t.EqualZero,this._sub.connect(this._equals),this.input[1]=this._sub.input[1]},t.extend(t.Equal,t.SignalBase),Object.defineProperty(t.Equal.prototype,\"value\",{get:function(){return this._sub.value},set:function(t){this._sub.value=t}}),t.Equal.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this._sub.dispose(),this._sub=null,this},t.Equal}(Tone_core_Tone),Tone_signal_Select=function(t){\"use strict\";t.Select=function(i){i=this.defaultArg(i,2),t.call(this,i,1),this.gate=new t.Signal(0),this._readOnly(\"gate\");for(var o=0;o<i;o++){var n=new e(o);this.input[o]=n,this.gate.connect(n.selecter),n.connect(this.output)}},t.extend(t.Select,t.SignalBase),t.Select.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Select.prototype.dispose=function(){this._writable(\"gate\"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.input.length;e++)this.input[e].dispose(),this.input[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Select}(Tone_core_Tone),Tone_signal_IfThenElse=function(t){\"use strict\";return t.IfThenElse=function(){t.call(this,3,0),this._selector=this.output=new t.Select(2),this.if=this.input[0]=this._selector.gate,this.then=this.input[1]=this._selector.input[1],this.else=this.input[2]=this._selector.input[0]},t.extend(t.IfThenElse,t.SignalBase),t.IfThenElse.prototype.dispose=function(){return t.prototype.dispose.call(this),this._selector.dispose(),this._selector=null,this.if=null,this.then=null,this.else=null,this},t.IfThenElse}(Tone_core_Tone),Tone_signal_OR=function(t){\"use strict\";return t.OR=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._sum=this.context.createGain(),this._gtz=this.output=new t.GreaterThanZero;for(var i=0;i<e;i++)this.input[i]=this._sum;this._sum.connect(this._gtz)},t.extend(t.OR,t.SignalBase),t.OR.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._sum.disconnect(),this._sum=null,this},t.OR}(Tone_core_Tone),Tone_signal_AND=function(t){\"use strict\";return t.AND=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._equals=this.output=new t.Equal(e);for(var i=0;i<e;i++)this.input[i]=this._equals},t.extend(t.AND,t.SignalBase),t.AND.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this},t.AND}(Tone_core_Tone),Tone_signal_NOT=function(t){\"use strict\";return t.NOT=t.EqualZero,t.NOT}(Tone_core_Tone),Tone_signal_GreaterThan=function(t){\"use strict\";return t.GreaterThan=function(e){t.call(this,2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}(Tone_core_Tone),Tone_signal_LessThan=function(t){\"use strict\";return t.LessThan=function(e){t.call(this,2,0),this._neg=this.input[0]=new t.Negate,this._gt=this.output=new t.GreaterThan,this._rhNeg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._neg.connect(this._gt),this._param.connect(this._rhNeg),this._rhNeg.connect(this._gt,0,1)},t.extend(t.LessThan,t.Signal),t.LessThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._gt.dispose(),this._gt=null,this._rhNeg.dispose(),this._rhNeg=null,this._param.dispose(),this._param=null,this},t.LessThan}(Tone_core_Tone),Tone_signal_Abs=function(t){\"use strict\";return t.Abs=function(){t.call(this,1,0),this._ltz=new t.LessThan(0),this._switch=this.output=new t.Select(2),this._negate=new t.Negate,this.input.connect(this._switch,0,0),this.input.connect(this._negate),this._negate.connect(this._switch,0,1),this.input.chain(this._ltz,this._switch.gate)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._switch.dispose(),this._switch=null,this._ltz.dispose(),this._ltz=null,this._negate.dispose(),this._negate=null,this},t.Abs}(Tone_core_Tone),Tone_signal_Max=function(t){\"use strict\";return t.Max=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._ifThenElse=this.output=new t.IfThenElse,this._gt=new t.GreaterThan,this.input[0].chain(this._gt,this._ifThenElse.if),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse.else),this._param.connect(this._gt,0,1)},t.extend(t.Max,t.Signal),t.Max.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._gt.dispose(),this._param=null,this._ifThenElse=null,this._gt=null,this},t.Max}(Tone_core_Tone),Tone_signal_Min=function(t){\"use strict\";return t.Min=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._ifThenElse=this.output=new t.IfThenElse,this._lt=new t.LessThan,this._param=this.input[1]=new t.Signal(e),this.input[0].chain(this._lt,this._ifThenElse.if),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse.else),this._param.connect(this._lt,0,1)},t.extend(t.Min,t.Signal),t.Min.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._lt.dispose(),this._param=null,this._ifThenElse=null,this._lt=null,this},t.Min}(Tone_core_Tone),Tone_signal_Modulo=function(t){\"use strict\";return t.Modulo=function(e){t.call(this,1,1),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,\"value\",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}(Tone_core_Tone),Tone_signal_Pow=function(t){\"use strict\";return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,\"value\",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}(Tone_core_Tone),Tone_signal_AudioToGain=function(t){\"use strict\";return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}(Tone_core_Tone),Tone_signal_Expr=function(t){\"use strict\";function e(t,e,i){var o=new t;return i._eval(e[0]).connect(o,0,0),i._eval(e[1]).connect(o,0,1),o}function i(t,e,i){var o=new t;return i._eval(e[0]).connect(o,0,0),o}function o(t){return t?parseFloat(t):void 0}function n(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var i=0;i<e;i++)this.input[i]=this.context.createGain();var o,n=this._parseTree(t);try{o=this._eval(n)}catch(e){throw this._disposeNodes(),new Error(\"Could evaluate expression: \"+t)}this.output=o},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\\d+\\.\\d+|^\\d+/,method:function(e){return new t.Signal(o(e))}},input:{regexp:/^\\$\\d/,method:function(t,e){return e.input[o(t.substr(1))]}}},glue:{\"(\":{regexp:/^\\(/},\")\":{regexp:/^\\)/},\",\":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},min:{regexp:/^min/,method:e.bind(this,t.Min)},max:{regexp:/^max/,method:e.bind(this,t.Max)},if:{regexp:/^if/,method:function(e,i){var o=new t.IfThenElse;return i._eval(e[0]).connect(o.if),i._eval(e[1]).connect(o.then),i._eval(e[2]).connect(o.else),o}},gt0:{regexp:/^gt0/,method:i.bind(this,t.GreaterThanZero)},eq0:{regexp:/^eq0/,method:i.bind(this,t.EqualZero)},mod:{regexp:/^mod/,method:function(e,i){var o=n(e[1]),s=new t.Modulo(o);return i._eval(e[0]).connect(s),s}},pow:{regexp:/^pow/,method:function(e,i){var o=n(e[1]),s=new t.Pow(o);return i._eval(e[0]).connect(s),s}},a2g:{regexp:/^a2g/,method:function(e,i){var o=new t.AudioToGain;return i._eval(e[0]).connect(o),o}}},binary:{\"+\":{regexp:/^\\+/,precedence:1,method:e.bind(this,t.Add)},\"-\":{regexp:/^\\-/,precedence:1,method:function(o,n){return 1===o.length?i(t.Negate,o,n):e(t.Subtract,o,n)}},\"*\":{regexp:/^\\*/,precedence:0,method:e.bind(this,t.Multiply)},\">\":{regexp:/^\\>/,precedence:2,method:e.bind(this,t.GreaterThan)},\"<\":{regexp:/^</,precedence:2,method:e.bind(this,t.LessThan)},\"==\":{regexp:/^==/,precedence:3,method:e.bind(this,t.Equal)},\"&&\":{regexp:/^&&/,precedence:4,method:e.bind(this,t.AND)},\"||\":{regexp:/^\\|\\|/,precedence:5,method:e.bind(this,t.OR)}},unary:{\"-\":{regexp:/^\\-/,method:i.bind(this,t.Negate)},\"!\":{regexp:/^\\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\\$\\d/g),i=0;if(null!==e)for(var o=0;o<e.length;o++){var n=parseInt(e[o].substr(1))+1;i=Math.max(i,n)}return i},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),i=0;i<t.length;i++)e=e.replace(/\\%/i,t[i]);return e},t.Expr.prototype._tokenize=function(e){for(var i=-1,o=[];e.length>0;){var n=s(e=e.trim());o.push(n),e=e.substr(n.value.length)}function s(e){for(var i in t.Expr._Expressions){var o=t.Expr._Expressions[i];for(var n in o){var s=o[n],r=s.regexp,a=e.match(r);if(null!==a)return{type:i,value:a[0],method:s.method}}}throw new SyntaxError(\"Unexpected token \"+e)}return{next:function(){return o[++i]},peek:function(){return o[i+1]}}},t.Expr.prototype._parseTree=function(e){var i=this._tokenize(e),o=this.isUndef.bind(this);function n(t,e){return!o(t)&&\"glue\"===t.type&&t.value===e}function s(e,i,n){var s=t.Expr._Expressions[i];if(!o(e))for(var r in s){var a=s[r];if(a.regexp.test(e.value)){if(o(n))return!0;if(a.precedence===n)return!0}}return!1}function r(t){var e;o(t)&&(t=5),e=t<0?function t(){var e,a;e=i.peek();if(s(e,\"unary\"))return e=i.next(),a=t(),{operator:e.value,method:e.method,args:[a]};return function(){var t,e;if(t=i.peek(),o(t))throw new SyntaxError(\"Unexpected termination of expression\");if(\"func\"===t.type)return function(t){var e=[];if(!n(i.next(),\"(\"))throw new SyntaxError('Expected ( in a function call \"'+t.value+'\"');n(i.peek(),\")\")||(e=function(){var t,e=[];for(;t=r(),!o(t)&&(e.push(t),n(i.peek(),\",\"));)i.next();return e}());if(!n(i.next(),\")\"))throw new SyntaxError('Expected ) in a function call \"'+t.value+'\"');return{method:t.method,args:e,name:name}}(t=i.next());if(\"value\"===t.type)return{method:(t=i.next()).method,args:t.value};if(n(t,\"(\")){if(i.next(),e=r(),!n(t=i.next(),\")\"))throw new SyntaxError(\"Expected )\");return e}throw new SyntaxError(\"Parse error, cannot process token \"+t.value)}()}():r(t-1);for(var a=i.peek();s(a,\"binary\",t);)e={operator:(a=i.next()).value,method:a.method,args:[e,r(t)]},a=i.peek();return e}return r()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}(Tone_core_Tone),Tone_signal_EqualPowerGain=function(t){\"use strict\";return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}(Tone_core_Tone),Tone_component_CrossFade=function(t){\"use strict\";return t.CrossFade=function(e){t.call(this,2,1),this.a=this.input[0]=this.context.createGain(),this.b=this.input[1]=this.context.createGain(),this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr(\"1 - $0\"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly(\"fade\")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(\"fade\"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.disconnect(),this.a=null,this.b.disconnect(),this.b=null,this},t.CrossFade}(Tone_core_Tone),a1819=master,a1820=Tone_component_CrossFade,p5.Effect=function(){this.ac=a1819.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this._drywet=new a1820(1),this.wet=this.ac.createGain(),this.input.connect(this._drywet.a),this.wet.connect(this._drywet.b),this._drywet.connect(this.output),this.connect(),a1819.soundArray.push(this)},p5.Effect.prototype.amp=function(t,e,i){e=e||0,i=i||0;var o=a1819.audiocontext.currentTime,n=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(n,o+i+.001),this.output.gain.linearRampToValueAtTime(t,o+i+e+.001)},p5.Effect.prototype.chain=function(){if(arguments.length>0){this.output.connect(arguments[0]);for(var t=1;t<arguments.length;t+=1)arguments[t-1].connect(arguments[t])}return this},p5.Effect.prototype.drywet=function(t){return void 0!==t&&(this._drywet.fade.value=t),this._drywet.fade.value},p5.Effect.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e.input?e.input:e)},p5.Effect.prototype.disconnect=function(){this.output.disconnect()},p5.Effect.prototype.dispose=function(){var t=a1819.soundArray.indexOf(this);a1819.soundArray.splice(t,1),this.input.disconnect(),this.input=void 0,this.output.disconnect(),this.output=void 0,this._drywet.disconnect(),delete this._drywet,this.wet.disconnect(),delete this.wet,this.ac=void 0},effect=p5.Effect,a1840=effect,p5.Filter=function(t){a1840.call(this),this.biquad=this.ac.createBiquadFilter(),this.input.connect(this.biquad),this.biquad.connect(this.wet),t&&this.setType(t)},p5.Filter.prototype=Object.create(a1840.prototype),p5.Filter.prototype.process=function(t,e,i,o){t.connect(this.input),this.set(e,i,o)},p5.Filter.prototype.set=function(t,e,i){t&&this.freq(t,i),e&&this.res(e,i)},p5.Filter.prototype.freq=function(t,e){var i=e||0;return t<=0&&(t=1),\"number\"==typeof t?(this.biquad.frequency.value=t,this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+i),this.biquad.frequency.exponentialRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.biquad.frequency),this.biquad.frequency.value},p5.Filter.prototype.res=function(t,e){var i=e||0;return\"number\"==typeof t?(this.biquad.Q.value=t,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+i),this.biquad.Q.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.biquad.Q),this.biquad.Q.value},p5.Filter.prototype.setType=function(t){this.biquad.type=t},p5.Filter.prototype.dispose=function(){a1840.prototype.dispose.apply(this),this.biquad.disconnect(),this.biquad=void 0},p5.LowPass=function(){p5.Filter.call(this,\"lowpass\")},p5.LowPass.prototype=Object.create(p5.Filter.prototype),p5.HighPass=function(){p5.Filter.call(this,\"highpass\")},p5.HighPass.prototype=Object.create(p5.Filter.prototype),p5.BandPass=function(){p5.Filter.call(this,\"bandpass\")},p5.BandPass.prototype=Object.create(p5.Filter.prototype),filter=p5.Filter,a1868=filter,a1869=effect,p5.Delay=function(){a1869.call(this),this._split=this.ac.createChannelSplitter(2),this._merge=this.ac.createChannelMerger(2),this._leftGain=this.ac.createGain(),this._rightGain=this.ac.createGain(),this.leftDelay=this.ac.createDelay(),this.rightDelay=this.ac.createDelay(),this._leftFilter=new a1868,this._rightFilter=new a1868,this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this.input.connect(this._split),this.leftDelay.connect(this._leftGain),this.rightDelay.connect(this._rightGain),this._leftGain.connect(this._leftFilter.input),this._rightGain.connect(this._rightFilter.input),this._merge.connect(this.wet),this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this.setType(0),this._maxDelay=this.leftDelay.delayTime.maxValue,this.feedback(.5)},p5.Delay.prototype=Object.create(a1869.prototype),p5.Delay.prototype.process=function(t,e,i,o){var n=i||0,s=e||0;if(n>=1)throw new Error(\"Feedback value will force a positive feedback loop.\");if(s>=this._maxDelay)throw new Error(\"Delay Time exceeds maximum delay time of \"+this._maxDelay+\" second.\");t.connect(this.input),this.leftDelay.delayTime.setValueAtTime(s,this.ac.currentTime),this.rightDelay.delayTime.setValueAtTime(s,this.ac.currentTime),this._leftGain.gain.value=n,this._rightGain.gain.value=n,o&&(this._leftFilter.freq(o),this._rightFilter.freq(o))},p5.Delay.prototype.delayTime=function(t){\"number\"!=typeof t?(t.connect(this.leftDelay.delayTime),t.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime))},p5.Delay.prototype.feedback=function(t){if(t&&\"number\"!=typeof t)t.connect(this._leftGain.gain),t.connect(this._rightGain.gain);else{if(t>=1)throw new Error(\"Feedback value will force a positive feedback loop.\");\"number\"==typeof t&&(this._leftGain.gain.value=t,this._rightGain.gain.value=t)}return this._leftGain.gain.value},p5.Delay.prototype.filter=function(t,e){this._leftFilter.set(t,e),this._rightFilter.set(t,e)},p5.Delay.prototype.setType=function(t){switch(1===t&&(t=\"pingPong\"),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._split.connect(this.leftDelay,0),this._split.connect(this.rightDelay,1),t){case\"pingPong\":this._rightFilter.setType(this._leftFilter.biquad.type),this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.rightDelay),this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._rightFilter.output.connect(this.rightDelay)}},delay=void(p5.Delay.prototype.dispose=function(){a1869.prototype.dispose.apply(this),this._split.disconnect(),this._leftFilter.dispose(),this._rightFilter.dispose(),this._merge.disconnect(),this._leftGain.disconnect(),this._rightGain.disconnect(),this.leftDelay.disconnect(),this.rightDelay.disconnect(),this._split=void 0,this._leftFilter=void 0,this._rightFilter=void 0,this._merge=void 0,this._leftGain=void 0,this._rightGain=void 0,this.leftDelay=void 0,this.rightDelay=void 0}),a1890=errorHandler,a1891=effect,p5.Reverb=function(){a1891.call(this),this.convolverNode=this.ac.createConvolver(),this.input.gain.value=.5,this.input.connect(this.convolverNode),this.convolverNode.connect(this.wet),this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse()},p5.Reverb.prototype=Object.create(a1891.prototype),p5.Reverb.prototype.process=function(t,e,i,o){t.connect(this.input);var n=!1;e&&(this._seconds=e,n=!0),i&&(this._decay=i),o&&(this._reverse=o),n&&this._buildImpulse()},p5.Reverb.prototype.set=function(t,e,i){var o=!1;t&&(this._seconds=t,o=!0),e&&(this._decay=e),i&&(this._reverse=i),o&&this._buildImpulse()},p5.Reverb.prototype._buildImpulse=function(){var t,e,i=this.ac.sampleRate,o=i*this._seconds,n=this._decay,s=this.ac.createBuffer(2,o,i),r=s.getChannelData(0),a=s.getChannelData(1);for(e=0;e<o;e++)t=this._reverse?o-e:e,r[e]=(2*Math.random()-1)*Math.pow(1-t/o,n),a[e]=(2*Math.random()-1)*Math.pow(1-t/o,n);this.convolverNode.buffer=s},p5.Reverb.prototype.dispose=function(){a1891.prototype.dispose.apply(this),this.convolverNode&&(this.convolverNode.buffer=null,this.convolverNode=null)},p5.Convolver=function(t,e,i){a1891.call(this),this.convolverNode=this.ac.createConvolver(),this.input.gain.value=.5,this.input.connect(this.convolverNode),this.convolverNode.connect(this.wet),t?(this.impulses=[],this._loadBuffer(t,e,i)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse())},p5.Convolver.prototype=Object.create(p5.Reverb.prototype),p5.prototype.registerPreloadMethod(\"createConvolver\",p5.prototype),p5.prototype.createConvolver=function(t,e,i){window.location.origin.indexOf(\"file://\")>-1&&\"undefined\"===window.cordova&&alert(\"This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS\");var o=new p5.Convolver(t,e,i);return o.impulses=[],o},p5.Convolver.prototype._loadBuffer=function(t,e,i){t=p5.prototype._checkFileFormats(t);var o=this,n=(new Error).stack,s=p5.prototype.getAudioContext(),r=new XMLHttpRequest;r.open(\"GET\",t,!0),r.responseType=\"arraybuffer\",r.onload=function(){if(200===r.status)s.decodeAudioData(r.response,function(i){var n={},s=t.split(\"/\");n.name=s[s.length-1],n.audioBuffer=i,o.impulses.push(n),o.convolverNode.buffer=n.audioBuffer,e&&e(n)},function(){var t=new a1890(\"decodeAudioData\",n,o.url),e=\"AudioContext error at decodeAudioData for \"+o.url;i&&(t.msg=e,i(t))});else{var a=new a1890(\"loadConvolver\",n,o.url),p=\"Unable to load \"+o.url+\". The request status was: \"+r.status+\" (\"+r.statusText+\")\";i&&(a.message=p,i(a))}},r.onerror=function(){var t=new a1890(\"loadConvolver\",n,o.url),e=\"There was no response from the server at \"+o.url+\". Check the url and internet connectivity.\";i&&(t.message=e,i(t))},r.send()},p5.Convolver.prototype.set=null,p5.Convolver.prototype.process=function(t){t.connect(this.input)},p5.Convolver.prototype.impulses=[],p5.Convolver.prototype.addImpulse=function(t,e,i){window.location.origin.indexOf(\"file://\")>-1&&\"undefined\"===window.cordova&&alert(\"This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS\"),this._loadBuffer(t,e,i)},p5.Convolver.prototype.resetImpulse=function(t,e,i){window.location.origin.indexOf(\"file://\")>-1&&\"undefined\"===window.cordova&&alert(\"This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS\"),this.impulses=[],this._loadBuffer(t,e,i)},p5.Convolver.prototype.toggleImpulse=function(t){if(\"number\"==typeof t&&t<this.impulses.length&&(this.convolverNode.buffer=this.impulses[t].audioBuffer),\"string\"==typeof t)for(var e=0;e<this.impulses.length;e++)if(this.impulses[e].name===t){this.convolverNode.buffer=this.impulses[e].audioBuffer;break}},reverb=void(p5.Convolver.prototype.dispose=function(){a1891.prototype.dispose.apply(this);for(var t in this.impulses)this.impulses[t]&&(this.impulses[t]=null);this.convolverNode.disconnect(),this.concolverNode=null}),Tone_core_TimelineState=function(t){\"use strict\";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:this.toSeconds(e)})},t.TimelineState}(Tone_core_Tone),Tone_core_Clock=function(t){\"use strict\";return t.Clock=function(){var e=this.optionsObject(arguments,[\"callback\",\"frequency\"],t.Clock.defaults);this.callback=e.callback,this._lookAhead=\"auto\",this._computedLookAhead=1/60,this._threshold=.5,this._nextTick=-1,this._lastUpdate=0,this._loopID=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this._readOnly(\"frequency\"),this._loop()},t.extend(t.Clock),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:\"auto\"},Object.defineProperty(t.Clock.prototype,\"state\",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,\"lookAhead\",{get:function(){return this._lookAhead},set:function(t){this._lookAhead=\"auto\"===t?\"auto\":this.toSeconds(t)}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Stopped&&this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(e){if(this._loopID=requestAnimationFrame(this._boundLoop),\"auto\"===this._lookAhead){if(!this.isUndef(e)){var i=(e-this._lastUpdate)/1e3;this._lastUpdate=e,i<this._threshold&&(this._computedLookAhead=(9*this._computedLookAhead+i)/10)}}else this._computedLookAhead=this._lookAhead;var o=this.now(),n=2*this._computedLookAhead,s=this._state.getEvent(o+n),r=t.State.Stopped;if(s&&(r=s.state,-1===this._nextTick&&r===t.State.Started&&(this._nextTick=s.time,this.isUndef(s.offset)||(this.ticks=s.offset))),r===t.State.Started)for(;o+n>this._nextTick;){o>this._nextTick+this._threshold&&(this._nextTick=o);var a=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++}else r===t.State.Stopped&&(this._nextTick=-1,this.ticks=0)},t.Clock.prototype.getStateAtTime=function(t){return this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){cancelAnimationFrame(this._loopID),t.TimelineState.prototype.dispose.call(this),this._writable(\"frequency\"),this.frequency.dispose(),this.frequency=null,this._boundLoop=t.noOp,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}(Tone_core_Tone),a1999=master,a2000=Tone_core_Clock,p5.Metro=function(){this.clock=new a2000({callback:this.ontick.bind(this)}),this.syncedParts=[],this.bpm=120,this._init(),this.prevTick=0,this.tatumTime=0,this.tickCallback=function(){}},p5.Metro.prototype.ontick=function(t){var e=t-this.prevTick,i=t-a1999.audiocontext.currentTime;if(!(e-this.tatumTime<=-.02)){this.prevTick=t;var o=this;this.syncedParts.forEach(function(t){t.isPlaying&&(t.incrementStep(i),t.phrases.forEach(function(t){var e=t.sequence,n=o.metroTicks%e.length;0!==e[n]&&(o.metroTicks<e.length||!t.looping)&&t.callback(i,e[n])}))}),this.metroTicks+=1,this.tickCallback(i)}},p5.Metro.prototype.setBPM=function(t,e){var i=60/(t*this.tatums),o=a1999.audiocontext.currentTime;this.tatumTime=i,e=e||0,this.clock.frequency.setValueAtTime(this.clock.frequency.value,o),this.clock.frequency.linearRampToValueAtTime(t,o+e),this.bpm=t},p5.Metro.prototype.getBPM=function(){return this.clock.getRate()/this.tatums*60},p5.Metro.prototype._init=function(){this.metroTicks=0},p5.Metro.prototype.resetSync=function(t){this.syncedParts=[t]},p5.Metro.prototype.pushSync=function(t){this.syncedParts.push(t)},p5.Metro.prototype.start=function(t){var e=t||0,i=a1999.audiocontext.currentTime;this.clock.start(i+e),this.setBPM(this.bpm)},p5.Metro.prototype.stop=function(t){var e=t||0,i=a1999.audiocontext.currentTime;this.clock.stop(i+e)},metro=void(p5.Metro.prototype.beatLength=function(t){this.tatums=1/t/4}),looper=function(){var t=master,e=120;function i(t){t.currentPart++,t.currentPart>=t.parts.length?(t.scoreStep=0,t.onended()):(t.scoreStep=0,t.parts[t.currentPart-1].stop(),t.parts[t.currentPart].start())}p5.prototype.setBPM=function(i,o){e=i;for(var n in t.parts)t.parts[n]&&t.parts[n].setBPM(i,o)},p5.Phrase=function(t,e,i){this.phraseStep=0,this.name=t,this.callback=e,this.sequence=i},p5.Part=function(i,o){this.length=i||0,this.partStep=0,this.phrases=[],this.isPlaying=!1,this.noLoop(),this.tatums=o||.0625,this.metro=new p5.Metro,this.metro._init(),this.metro.beatLength(this.tatums),this.metro.setBPM(e),t.parts.push(this),this.callback=function(){}},p5.Part.prototype.setBPM=function(t,e){this.metro.setBPM(t,e)},p5.Part.prototype.getBPM=function(){return this.metro.getBPM()},p5.Part.prototype.start=function(t){if(!this.isPlaying){this.isPlaying=!0,this.metro.resetSync(this);var e=t||0;this.metro.start(e)}},p5.Part.prototype.loop=function(t){this.looping=!0,this.onended=function(){this.partStep=0};var e=t||0;this.start(e)},p5.Part.prototype.noLoop=function(){this.looping=!1,this.onended=function(){this.stop()}},p5.Part.prototype.stop=function(t){this.partStep=0,this.pause(t)},p5.Part.prototype.pause=function(t){this.isPlaying=!1;var e=t||0;this.metro.stop(e)},p5.Part.prototype.addPhrase=function(t,e,i){var o;if(3===arguments.length)o=new p5.Phrase(t,e,i);else{if(!(arguments[0]instanceof p5.Phrase))throw\"invalid input. addPhrase accepts name, callback, array or a p5.Phrase\";o=arguments[0]}this.phrases.push(o),o.sequence.length>this.length&&(this.length=o.sequence.length)},p5.Part.prototype.removePhrase=function(t){for(var e in this.phrases)this.phrases[e].name===t&&this.phrases.splice(e,1)},p5.Part.prototype.getPhrase=function(t){for(var e in this.phrases)if(this.phrases[e].name===t)return this.phrases[e]},p5.Part.prototype.replaceSequence=function(t,e){for(var i in this.phrases)this.phrases[i].name===t&&(this.phrases[i].sequence=e)},p5.Part.prototype.incrementStep=function(t){this.partStep<this.length-1?(this.callback(t),this.partStep+=1):this.looping||this.partStep!==this.length-1||this.onended()},p5.Part.prototype.onStep=function(t){this.callback=t},p5.Score=function(){this.parts=[],this.currentPart=0;var t=this;for(var e in arguments)arguments[e]&&this.parts[e]&&(this.parts[e]=arguments[e],this.parts[e].nextPart=this.parts[e+1],this.parts[e].onended=function(){t.resetPart(e),i(t)});this.looping=!1},p5.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop(),this.resetParts()},this.currentPart=0},p5.Score.prototype.start=function(){this.parts[this.currentPart].start(),this.scoreStep=0},p5.Score.prototype.stop=function(){this.parts[this.currentPart].stop(),this.currentPart=0,this.scoreStep=0},p5.Score.prototype.pause=function(){this.parts[this.currentPart].stop()},p5.Score.prototype.loop=function(){this.looping=!0,this.start()},p5.Score.prototype.noLoop=function(){this.looping=!1},p5.Score.prototype.resetParts=function(){var t=this;this.parts.forEach(function(e){t.resetParts[e]})},p5.Score.prototype.resetPart=function(t){this.parts[t].stop(),this.parts[t].partStep=0;for(var e in this.parts[t].phrases)this.parts[t]&&(this.parts[t].phrases[e].phraseStep=0)},p5.Score.prototype.setBPM=function(t,e){for(var i in this.parts)this.parts[i]&&this.parts[i].setBPM(t,e)}}(),compressor=function(){\"use strict\";var t=effect;return p5.Compressor=function(){t.call(this),this.compressor=this.ac.createDynamicsCompressor(),this.input.connect(this.compressor),this.compressor.connect(this.wet)},p5.Compressor.prototype=Object.create(t.prototype),p5.Compressor.prototype.process=function(t,e,i,o,n,s){t.connect(this.input),this.set(e,i,o,n,s)},p5.Compressor.prototype.set=function(t,e,i,o,n){void 0!==t&&this.attack(t),void 0!==e&&this.knee(e),void 0!==i&&this.ratio(i),void 0!==o&&this.threshold(o),void 0!==n&&this.release(n)},p5.Compressor.prototype.attack=function(t,e){var i=e||0;return\"number\"==typeof t?(this.compressor.attack.value=t,this.compressor.attack.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.attack.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):void 0!==t&&t.connect(this.compressor.attack),this.compressor.attack.value},p5.Compressor.prototype.knee=function(t,e){var i=e||0;return\"number\"==typeof t?(this.compressor.knee.value=t,this.compressor.knee.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.knee.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):void 0!==t&&t.connect(this.compressor.knee),this.compressor.knee.value},p5.Compressor.prototype.ratio=function(t,e){var i=e||0;return\"number\"==typeof t?(this.compressor.ratio.value=t,this.compressor.ratio.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.ratio.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):void 0!==t&&t.connect(this.compressor.ratio),this.compressor.ratio.value},p5.Compressor.prototype.threshold=function(t,e){var i=e||0;return\"number\"==typeof t?(this.compressor.threshold.value=t,this.compressor.threshold.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.threshold.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):void 0!==t&&t.connect(this.compressor.threshold),this.compressor.threshold.value},p5.Compressor.prototype.release=function(t,e){var i=e||0;return\"number\"==typeof t?(this.compressor.release.value=t,this.compressor.release.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.release.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):\"undefined\"!=typeof number&&t.connect(this.compressor.release),this.compressor.release.value},p5.Compressor.prototype.reduction=function(){return this.compressor.reduction.value},p5.Compressor.prototype.dispose=function(){t.prototype.dispose.apply(this),this.compressor.disconnect(),this.compressor=void 0},p5.Compressor}(),soundRecorder=function(){var t=master,e=t.audiocontext;function i(t,e,i){for(var o=i.length,n=0;n<o;n++)t.setUint8(e+n,i.charCodeAt(n))}p5.SoundRecorder=function(){this.input=e.createGain(),this.output=e.createGain(),this.recording=!1,this.bufferSize=1024,this._channels=2,this._clear(),this._jsNode=e.createScriptProcessor(this.bufferSize,this._channels,2),this._jsNode.onaudioprocess=this._audioprocess.bind(this),this._callback=function(){},this._jsNode.connect(p5.soundOut._silentNode),this.setInput(),t.soundArray.push(this)},p5.SoundRecorder.prototype.setInput=function(t){this.input.disconnect(),this.input=null,this.input=e.createGain(),this.input.connect(this._jsNode),this.input.connect(this.output),t?t.connect(this.input):p5.soundOut.output.connect(this.input)},p5.SoundRecorder.prototype.record=function(t,i,o){this.recording=!0,i&&(this.sampleLimit=Math.round(i*e.sampleRate)),t&&o?this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer),o()}:t&&(this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer)})},p5.SoundRecorder.prototype.stop=function(){this.recording=!1,this._callback(),this._clear()},p5.SoundRecorder.prototype._clear=function(){this._leftBuffers=[],this._rightBuffers=[],this.recordedSamples=0,this.sampleLimit=null},p5.SoundRecorder.prototype._audioprocess=function(t){if(!1!==this.recording&&!0===this.recording)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();else{var e=t.inputBuffer.getChannelData(0),i=t.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(e)),this._rightBuffers.push(new Float32Array(i)),this.recordedSamples+=this.bufferSize}},p5.SoundRecorder.prototype._getBuffer=function(){var t=[];return t.push(this._mergeBuffers(this._leftBuffers)),t.push(this._mergeBuffers(this._rightBuffers)),t},p5.SoundRecorder.prototype._mergeBuffers=function(t){for(var e=new Float32Array(this.recordedSamples),i=0,o=t.length,n=0;n<o;n++){var s=t[n];e.set(s,i),i+=s.length}return e},p5.SoundRecorder.prototype.dispose=function(){this._clear();var e=t.soundArray.indexOf(this);t.soundArray.splice(e,1),this._callback=function(){},this.input&&this.input.disconnect(),this.input=null,this._jsNode=null},p5.prototype.saveSound=function(t,e){var o,n=function(t,e){for(var i=t.length+e.length,o=new Float32Array(i),n=0,s=0;s<i;)o[s++]=t[n],o[s++]=e[n],n++;return o}(o=t.buffer.getChannelData(0),t.buffer.numberOfChannels>1?t.buffer.getChannelData(1):o),s=new window.ArrayBuffer(44+2*n.length),r=new window.DataView(s);i(r,0,\"RIFF\"),r.setUint32(4,36+2*n.length,!0),i(r,8,\"WAVE\"),i(r,12,\"fmt \"),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,2,!0),r.setUint32(24,44100,!0),r.setUint32(28,176400,!0),r.setUint16(32,4,!0),r.setUint16(34,16,!0),i(r,36,\"data\"),r.setUint32(40,2*n.length,!0);for(var a=n.length,p=44,u=0;u<a;u++)r.setInt16(p,32767*n[u],!0),p+=2;p5.prototype.writeFile([r],e,\"wav\")}}(),p5.PeakDetect=function(t,e,i,o){this.framesPerPeak=o||20,this.framesSinceLastPeak=0,this.decayRate=.95,this.threshold=i||.35,this.cutoff=0,this.cutoffMult=1.5,this.energy=0,this.penergy=0,this.currentValue=0,this.isDetected=!1,this.f1=t||40,this.f2=e||2e4,this._onPeak=function(){}},p5.PeakDetect.prototype.update=function(t){var e=this.energy=t.getEnergy(this.f1,this.f2)/255;e>this.cutoff&&e>this.threshold&&e-this.penergy>0?(this._onPeak(),this.isDetected=!0,this.cutoff=e*this.cutoffMult,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold))),this.currentValue=e,this.penergy=e},peakdetect=void(p5.PeakDetect.prototype.onPeak=function(t,e){var i=this;i._onPeak=function(){t(i.energy,e)}}),a2231=master,p5.Gain=function(){this.ac=a2231.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.output),a2231.soundArray.push(this)},p5.Gain.prototype.setInput=function(t){t.connect(this.input)},p5.Gain.prototype.connect=function(t){var e=t||p5.soundOut.input;this.output.connect(e.input?e.input:e)},p5.Gain.prototype.disconnect=function(){this.output.disconnect()},p5.Gain.prototype.amp=function(t,e,i){e=e||0,i=i||0;var o=a2231.audiocontext.currentTime,n=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(n,o+i),this.output.gain.linearRampToValueAtTime(t,o+i+e)},gain=void(p5.Gain.prototype.dispose=function(){var t=a2231.soundArray.indexOf(this);a2231.soundArray.splice(t,1),this.output.disconnect(),this.input.disconnect(),this.output=void 0,this.input=void 0}),distortion=function(){var t=effect;function e(t){for(var e,i=\"number\"==typeof t?t:50,o=new Float32Array(44100),n=Math.PI/180,s=0;s<44100;++s)e=2*s/44100-1,o[s]=(3+i)*e*20*n/(Math.PI+i*Math.abs(e));return o}p5.Distortion=function(i,o){if(t.call(this),void 0===i&&(i=.25),\"number\"!=typeof i)throw new Error(\"amount must be a number\");if(void 0===o&&(o=\"2x\"),\"string\"!=typeof o)throw new Error(\"oversample must be a String\");var n=p5.prototype.map(i,0,1,0,2e3);this.waveShaperNode=this.ac.createWaveShaper(),this.amount=n,this.waveShaperNode.curve=e(n),this.waveShaperNode.oversample=o,this.input.connect(this.waveShaperNode),this.waveShaperNode.connect(this.wet)},p5.Distortion.prototype=Object.create(t.prototype),p5.Distortion.prototype.process=function(t,e,i){t.connect(this.input),this.set(e,i)},p5.Distortion.prototype.set=function(t,i){if(t){var o=p5.prototype.map(t,0,1,0,2e3);this.amount=o,this.waveShaperNode.curve=e(o)}i&&(this.waveShaperNode.oversample=i)},p5.Distortion.prototype.getAmount=function(){return this.amount},p5.Distortion.prototype.getOversample=function(){return this.waveShaperNode.oversample},p5.Distortion.prototype.dispose=function(){t.prototype.dispose.apply(this),this.waveShaperNode.disconnect(),this.waveShaperNode=null}}(),src_app=sndcore});"},"hash":"ede79b28dc14dc52ac2f5a4974bdc9a8"}